{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _dec,_class,_temp;import React from\"react\";import{Button,Col,Form,Modal}from\"react-bootstrap\";import'./rolemanagement.css';import EditIcon from\"../components/Icons/editIcon\";import AppTextbox from\"../AppTextbox/index\";import dotenv from'dotenv';import config from\"../config\";import PaginatedTable from\"../PaginatedTable\";import{UserAction,UserActionCategory}from\"../UserActionCategory\";import MyToast from\"../MyToast\";import{inject}from\"mobx-react\";import{checkRenderPermissions}from\"../helpers\";import{permissions}from\"../constants\";import ReactTable from\"../PaginatedTable/ReactTable\";dotenv.config();var AddRole=(_dec=inject('playerStore','authStore'),_dec(_class=(_temp=/*#__PURE__*/function(_React$Component){_inherits(AddRole,_React$Component);var _super=_createSuper(AddRole);function AddRole(props){var _this;_classCallCheck(this,AddRole);_this=_super.call(this,props);_this.handleInputChange=function(event,stateName){_this.props.onInputChange(stateName,event.target.value);};return _this;}_createClass(AddRole,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,roleId=_this$props.roleId,roleName=_this$props.roleName,policies=_this$props.policies,isEditRole=_this$props.isEditRole,onCheckboxClick=_this$props.onCheckboxClick;var tableHeader=[{key:'category',label:'Module',width:'25%'},{key:'description',label:'Policy',width:'30%'},{key:'allowed',label:'Allowed',width:'25%'}];var rowData=policies.map(function(p){p.allowed=/*#__PURE__*/React.createElement(Form.Check,{checked:p.isAllowed,onClick:function onClick(){return onCheckboxClick(p.id);}});return p;});return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"formGroupRoleName\",placeholder:\"Role Name\",value:roleName,onChange:function onChange(e){return _this2.handleInputChange(e,'roleName');}}))),/*#__PURE__*/React.createElement(ReactTable,{tableHeader:tableHeader,rowData:rowData,className:\"edit-role-table\"})));}}]);return AddRole;}(React.Component),_temp))||_class);var RoleManagement=/*#__PURE__*/function(_React$Component2){_inherits(RoleManagement,_React$Component2);var _super2=_createSuper(RoleManagement);function RoleManagement(props){var _this3;_classCallCheck(this,RoleManagement);_this3=_super2.call(this,props);_this3.fetchAllRoles=function(){fetch(\"\".concat(config.SERVER_BASE_URL,\"/v1/users/allroles\"),{method:'get',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(res){_this3.setRoles(res);}).catch(function(error){alert('Error:',error);});};_this3.showAddUserModal=function(){_this3.setState({showModal:true,isEditRole:false,roleId:0,roleName:'',policies:''});};_this3.onAddRoleClick=function(e){e.preventDefault();var _this3$state=_this3.state,roleId=_this3$state.roleId,roleName=_this3$state.roleName,policies=_this3$state.policies,roleList=_this3$state.roleList,isEditRole=_this3$state.isEditRole;var policyIds=policies.filter(function(policy){return policy.isAllowed;}).map(function(p){return p.id;});if(isEditRole){var xhrData={roleid:roleId,policyids:policyIds,rolename:roleName};var data=localStorage.getItem('userName');var url=\"\".concat(config.SERVER_BASE_URL,\"/v1/roles/update\");fetch(url,{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'},body:JSON.stringify(xhrData)}).then(function(response){return response.json();}).then(function(res){_this3.setState({isEditRole:false,showModal:false,roleName:'',successMessage:res.message,showSuccess:true});}).catch(function(error){_this3.setState({errorMessage:error,showError:true});});fetch(\"\".concat(config.SERVER_BASE_URL,\"/v1/users/querypolicies\"),{method:'POST',// or 'PUT'\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({username:data})}).then(function(response){return response.json();}).then(function(res){if(res&&res.error){_this3.setState({errorMessage:res.error});}else{localStorage.setItem('userpolicies',JSON.stringify(res));}}).catch(function(error){console.log(error);_this3.setState({errorMessage:error.toString()});});}else{var _xhrData={policyids:policyIds,rolename:roleName};var _url=\"\".concat(config.SERVER_BASE_URL,\"/v1/roles/create\");fetch(_url,{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'},body:JSON.stringify(_xhrData)}).then(function(res){_this3.setState({policies:[],isEditRole:false,showModal:false,roleName:''},function(){return _this3.fetchAllRoles();});}).catch(function(error){alert('Error:',error);});}};_this3.onCancel=function(e){e.preventDefault();_this3.setState({showModal:false});};_this3.onDelete=function(e){e.preventDefault();_this3.setState({showConfirmPopup:true});};_this3.handleInputChange=function(stateName,value){_this3.setState(_defineProperty({},stateName,value));};_this3.handleRoleChange=function(role){_this3.setState({roleId:role.roleId});};_this3.handleEditRole=function(roleId,roleName){var url=\"\".concat(config.SERVER_BASE_URL,\"/v1/users/getpoliciesbyroleid?roleid=\").concat(roleId);fetch(url,{method:'get',headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(res){_this3.setState({policies:res,isEditRole:true,showModal:true,roleName:roleName,roleId:roleId});}).catch(function(error){_this3.setState({errorMessage:error,showError:true});});_this3.props.playerStore.logAction(UserActionCategory.PAGE_VIEW,UserAction.EDIT_ROLE,roleName);};_this3.cancelDeleteRole=function(){_this3.setState({showConfirmPopup:false});};_this3.deleteRole=function(){var roleId=_this3.state.roleId;//Delete API call\nvar xhrData={roleid:roleId};var url=\"\".concat(config.SERVER_BASE_URL,\"/v1/roles/delete\");fetch(url,{method:'DELETE',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'},body:JSON.stringify(xhrData)}).then(function(response){return response.json();}).then(function(res){if(res.error){_this3.setState({isEditRole:false,showModal:false,roleName:'',roleId:'',showConfirmPopup:false,errorMessage:res.error,showError:true});}else{_this3.setState({successMessage:res.message,showSuccess:true,isEditRole:false,showModal:false,roleName:'',roleId:'',showConfirmPopup:false},function(){return _this3.fetchAllRoles();});}}).catch(function(error){_this3.setState({errorMessage:error,showError:true});});};_this3.onCheckboxClick=function(policyId){var _policies=_this3.state.policies;_policies.forEach(function(p){return delete p.allowed;});_policies=JSON.parse(JSON.stringify(_policies));// const roleId = this.state.roleId;\n// const selectedRole = _rolesList.find(role => role.roleid === roleId);\nvar selectedPolicy=_policies.find(function(policy){return policy.id===policyId;});selectedPolicy.isAllowed=!selectedPolicy.isAllowed;_this3.setState({policies:_policies});};_this3.addRole=function(){var url=\"\".concat(config.SERVER_BASE_URL,\"/v1/users/allpolicies\");fetch(url,{method:'get',headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(res){res.forEach(function(p){return p.isAllowed=false;});_this3.setState({policies:res,isEditRole:false,showModal:true,roleName:'',roleId:''});}).catch(function(error){_this3.setState({errorMessage:error,showError:true});});};_this3.getTableHeader=function(){return/*#__PURE__*/React.createElement(\"div\",{className:\"role-table-header\"},/*#__PURE__*/React.createElement(\"div\",null,\"Role Management\"),checkRenderPermissions(permissions.CAN_ADD_ROLE,JSON.parse(localStorage.getItem('userpolicies')))?/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:_this3.addRole},\"Add Role\"):null);};_this3.handleToastClose=function(stateName){_this3.setState(_defineProperty({},stateName,false));};_this3.state={roleList:[],showModal:false,selectedId:0,roleId:'',roleName:'',policies:[],isEditRole:false,showConfirmPopup:false,tableHeader:[{key:'roleid',label:'Role ID'},{key:'rolename',label:'Role Name'}],showSuccess:false,successMessage:'',errorMessage:'',showError:false};return _this3;}_createClass(RoleManagement,[{key:\"componentDidMount\",value:function componentDidMount(){// Call API to fetch roles\nthis.fetchAllRoles();}},{key:\"setRoles\",value:function setRoles(response){var _this4=this;var roles=response;var _tableHeader=JSON.parse(JSON.stringify(this.state.tableHeader));if(checkRenderPermissions(permissions.CAN_EDIT_ROLE,JSON.parse(localStorage.getItem('userpolicies')))){if(_tableHeader.findIndex(function(row){return row.key==='edit';})===-1){_tableHeader.push({key:'edit',label:'Edit'});}roles.forEach(function(role){return role.edit=/*#__PURE__*/React.createElement(EditIcon,{color:\"#FFFFFF\",onclick:function onclick(){return _this4.handleEditRole(role.roleid,role.rolename);}});});}this.setState({roleList:roles,tableHeader:_tableHeader});}},{key:\"renderRoleManagement\",value:function renderRoleManagement(){var _this5=this;var _this$state=this.state,showModal=_this$state.showModal,roleId=_this$state.roleId,roleName=_this$state.roleName,policies=_this$state.policies,roleList=_this$state.roleList,isEditRole=_this$state.isEditRole,showConfirmPopup=_this$state.showConfirmPopup,tableHeader=_this$state.tableHeader,showSuccess=_this$state.showSuccess,successMessage=_this$state.successMessage,errorMessage=_this$state.errorMessage,showError=_this$state.showError;var isDisabled=true;var isOneSelected=policies.findIndex(function(p){return p.isAllowed;});if(!isEditRole&&roleName.trim()&&isOneSelected!==-1){isDisabled=false;}else if(isEditRole&&roleName.trim()&&isOneSelected!==-1){isDisabled=false;}var customHeight=\"\".concat(window.innerHeight-162,\"px\");var customStyle={height:customHeight};var _header=this.getTableHeader();return/*#__PURE__*/React.createElement(\"div\",{className:\"role-management app-center-body\"},showSuccess?/*#__PURE__*/React.createElement(MyToast,{showToast:showSuccess,message:successMessage,isSuccessMessage:true,handleClose:function handleClose(){return _this5.handleToastClose('showSuccess');}}):null,errorMessage&&showError?/*#__PURE__*/React.createElement(MyToast,{showToast:showError,message:errorMessage,isSuccessMessage:false,handleClose:function handleClose(){return _this5.handleToastClose('showError');}}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"role-management-child\"},/*#__PURE__*/React.createElement(ReactTable,{header:_header,tableHeader:tableHeader,rowData:roleList,handleColumnCLick:this.handleEditRole}),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",show:showModal,className:\"\".concat(showConfirmPopup?'hide-user-popup':'',\" role-modal\")},/*#__PURE__*/React.createElement(Modal.Header,null,/*#__PURE__*/React.createElement(\"h5\",null,isEditRole?'Edit Role':'Add Role')),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(AddRole,{roleName:roleName,roleId:roleId,policies:policies,onInputChange:this.handleInputChange,onRoleChange:this.handleRoleChange,isEditRole:isEditRole,onCheckboxClick:this.onCheckboxClick})),/*#__PURE__*/React.createElement(Modal.Footer,null,checkRenderPermissions(permissions.CAN_DELETE_ROLE,JSON.parse(localStorage.getItem('userpolicies')))&&isEditRole?/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(e){return _this5.onDelete(e);}},\"Delete Role\"):null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this5.onCancel(e);}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{disabled:isDisabled,variant:\"primary\",onClick:function onClick(e){return _this5.onAddRoleClick(e);}},isEditRole?'Update':'Add Role'))),/*#__PURE__*/React.createElement(Modal,{show:showConfirmPopup,className:\"delete-popup\"},/*#__PURE__*/React.createElement(Modal.Header,null,/*#__PURE__*/React.createElement(\"strong\",null,\"Do you really want to delete\",/*#__PURE__*/React.createElement(\"br\",null),roleName,\" ?\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this5.cancelDeleteRole(e);}},\"No\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(e){return _this5.deleteRole(e);}},\"Yes\")))));}},{key:\"render\",value:function render(){var renderObj;if(checkRenderPermissions(permissions.CAN_ACCESS_ROLE_MANAGEMENT,JSON.parse(localStorage.getItem('userpolicies')))){renderObj=this.renderRoleManagement();}else{renderObj=/*#__PURE__*/React.createElement(\"h1\",{class:\"unauthorized-header\"},\"You do not have permission to view this page! Please contact your System Administrator!\");}return renderObj;}}]);return RoleManagement;}(React.Component);export default RoleManagement;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/ReactExampleCode/test-typescript-compile-within-a-javascript-project/Code/src/roles/rolemanagement.js"],"names":["React","Button","Col","Form","Modal","EditIcon","AppTextbox","dotenv","config","PaginatedTable","UserAction","UserActionCategory","MyToast","inject","checkRenderPermissions","permissions","ReactTable","AddRole","props","handleInputChange","event","stateName","onInputChange","target","value","roleId","roleName","policies","isEditRole","onCheckboxClick","tableHeader","key","label","width","rowData","map","p","allowed","isAllowed","id","e","Component","RoleManagement","fetchAllRoles","fetch","SERVER_BASE_URL","method","headers","localStorage","getItem","then","response","json","res","setRoles","catch","error","alert","showAddUserModal","setState","showModal","onAddRoleClick","preventDefault","state","roleList","policyIds","filter","policy","xhrData","roleid","policyids","rolename","data","url","body","JSON","stringify","successMessage","message","showSuccess","errorMessage","showError","username","setItem","console","log","toString","onCancel","onDelete","showConfirmPopup","handleRoleChange","role","handleEditRole","playerStore","logAction","PAGE_VIEW","EDIT_ROLE","cancelDeleteRole","deleteRole","policyId","_policies","forEach","parse","selectedPolicy","find","addRole","getTableHeader","CAN_ADD_ROLE","handleToastClose","selectedId","roles","_tableHeader","CAN_EDIT_ROLE","findIndex","row","push","edit","isDisabled","isOneSelected","trim","customHeight","window","innerHeight","customStyle","height","_header","CAN_DELETE_ROLE","renderObj","CAN_ACCESS_ROLE_MANAGEMENT","renderRoleManagement"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {Button, Col, Form, Modal} from \"react-bootstrap\";\r\nimport './rolemanagement.css';\r\nimport EditIcon from \"../components/Icons/editIcon\";\r\nimport AppTextbox from \"../AppTextbox/index\"\r\nimport dotenv from 'dotenv'\r\nimport config from \"../config\";\r\nimport PaginatedTable from \"../PaginatedTable\";\r\nimport {UserAction, UserActionCategory} from \"../UserActionCategory\";\r\nimport MyToast from \"../MyToast\";\r\nimport {inject} from \"mobx-react\";\r\nimport {checkRenderPermissions} from \"../helpers\";\r\nimport {permissions} from \"../constants\";\r\nimport ReactTable from \"../PaginatedTable/ReactTable\";\r\n\r\ndotenv.config()\r\n\r\n@inject('playerStore', 'authStore')\r\nclass AddRole extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    handleInputChange = (event, stateName) => {\r\n        this.props.onInputChange(stateName, event.target.value)\r\n    }\r\n\r\n\r\n    render() {\r\n        const {roleId, roleName, policies, isEditRole, onCheckboxClick} = this.props;\r\n\r\n        const tableHeader = [\r\n            {key: 'category', label: 'Module', width: '25%'},\r\n            {key: 'description', label: 'Policy', width: '30%'},\r\n            {key: 'allowed', label: 'Allowed', width: '25%'}\r\n        ];\r\n        const rowData = policies.map(p => {\r\n            p.allowed = <Form.Check checked={p.isAllowed} onClick={() => onCheckboxClick(p.id)}/>\r\n            return p;\r\n        });\r\n\r\n        return (\r\n            <div className='container'>\r\n                <Form>\r\n                    <Form.Row>\r\n                        <Col>\r\n                            <AppTextbox controlId='formGroupRoleName'\r\n                                        placeholder='Role Name'\r\n                                        value={roleName}\r\n                                        onChange={(e) => this.handleInputChange(e, 'roleName')}\r\n                            />\r\n                        </Col>\r\n                    </Form.Row>\r\n                    <ReactTable tableHeader={tableHeader} rowData={rowData} className='edit-role-table'/>\r\n                </Form>\r\n\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nclass RoleManagement extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            roleList: [],\r\n            showModal: false,\r\n            selectedId: 0,\r\n            roleId: '',\r\n            roleName: '',\r\n            policies: [],\r\n            isEditRole: false,\r\n            showConfirmPopup: false,\r\n            tableHeader: [\r\n                {key: 'roleid', label: 'Role ID'},\r\n                {key: 'rolename', label: 'Role Name'}\r\n            ],\r\n            showSuccess: false,\r\n            successMessage: '',\r\n            errorMessage: '',\r\n            showError: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        // Call API to fetch roles\r\n        this.fetchAllRoles();\r\n    }\r\n\r\n    fetchAllRoles = () => {\r\n        fetch(`${config.SERVER_BASE_URL}/v1/users/allroles`, {\r\n            method: 'get',\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                this.setRoles(res);\r\n            })\r\n            .catch((error) => {\r\n                alert('Error:', error);\r\n            });\r\n    }\r\n\r\n    setRoles(response) {\r\n        const roles = response;\r\n\r\n        let _tableHeader = JSON.parse(JSON.stringify(this.state.tableHeader));\r\n\r\n        if (checkRenderPermissions(permissions.CAN_EDIT_ROLE, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            if (_tableHeader.findIndex(row => row.key === 'edit') === -1) {\r\n                _tableHeader.push({key: 'edit', label: 'Edit'});\r\n            }\r\n            roles.forEach(role => role.edit =\r\n                <EditIcon color='#FFFFFF' onclick={() => this.handleEditRole(role.roleid, role.rolename)}/>)\r\n        }\r\n\r\n        this.setState({roleList: roles, tableHeader: _tableHeader});\r\n    }\r\n\r\n\r\n    showAddUserModal = () => {\r\n        this.setState({\r\n            showModal: true,\r\n            isEditRole: false,\r\n            roleId: 0,\r\n            roleName: '',\r\n            policies: '',\r\n        });\r\n    }\r\n\r\n    onAddRoleClick = (e) => {\r\n        e.preventDefault();\r\n        const {roleId, roleName, policies, roleList, isEditRole} = this.state;\r\n        const policyIds = policies.filter(policy => policy.isAllowed).map(p => p.id);\r\n        if (isEditRole) {\r\n            const xhrData = {roleid: roleId, policyids: policyIds, rolename: roleName};\r\n            const data = localStorage.getItem('userName');\r\n\r\n            const url = `${config.SERVER_BASE_URL}/v1/roles/update`;\r\n            fetch(url, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(xhrData),\r\n            })\r\n                .then(response => response.json())\r\n                .then(res => {\r\n                    this.setState({\r\n                        isEditRole: false,\r\n                        showModal: false,\r\n                        roleName: '',\r\n                        successMessage: res.message,\r\n                        showSuccess: true\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({errorMessage: error, showError: true})\r\n                });\r\n\r\n            fetch(`${config.SERVER_BASE_URL}/v1/users/querypolicies`, {\r\n                method: 'POST', // or 'PUT'\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({username: data}),\r\n            })\r\n                .then(response => response.json())\r\n                .then(res => {\r\n                    if (res && res.error) {\r\n                        this.setState({errorMessage: res.error});\r\n                    } else {\r\n                        localStorage.setItem('userpolicies', JSON.stringify(res));\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error);\r\n                    this.setState({errorMessage: error.toString()});\r\n                });\r\n        } else {\r\n            const xhrData = {policyids: policyIds, rolename: roleName};\r\n            const url = `${config.SERVER_BASE_URL}/v1/roles/create`;\r\n            fetch(url, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(xhrData),\r\n            })\r\n                .then(res => {\r\n                    this.setState({\r\n                        policies: [],\r\n                        isEditRole: false,\r\n                        showModal: false,\r\n                        roleName: ''\r\n                    }, () => this.fetchAllRoles())\r\n                })\r\n                .catch((error) => {\r\n                    alert('Error:', error);\r\n                });\r\n        }\r\n\r\n    }\r\n\r\n    onCancel = (e) => {\r\n        e.preventDefault();\r\n        this.setState({showModal: false});\r\n    }\r\n\r\n    onDelete = (e) => {\r\n        e.preventDefault();\r\n        this.setState({showConfirmPopup: true});\r\n    }\r\n\r\n    handleInputChange = (stateName, value) => {\r\n        this.setState({[stateName]: value});\r\n    }\r\n    handleRoleChange = (role) => {\r\n        this.setState({roleId: role.roleId})\r\n    }\r\n    handleEditRole = (roleId, roleName) => {\r\n        const url = `${config.SERVER_BASE_URL}/v1/users/getpoliciesbyroleid?roleid=${roleId}`;\r\n        fetch(url, {\r\n            method: 'get',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                this.setState({policies: res, isEditRole: true, showModal: true, roleName: roleName, roleId: roleId})\r\n            })\r\n            .catch((error) => {\r\n                this.setState({errorMessage: error, showError: true})\r\n            });\r\n        this.props.playerStore.logAction(UserActionCategory.PAGE_VIEW, UserAction.EDIT_ROLE, roleName);\r\n    }\r\n    cancelDeleteRole = () => {\r\n        this.setState({showConfirmPopup: false});\r\n    }\r\n    deleteRole = () => {\r\n        const {roleId} = this.state;\r\n        //Delete API call\r\n\r\n        const xhrData = {roleid: roleId};\r\n\r\n        const url = `${config.SERVER_BASE_URL}/v1/roles/delete`;\r\n        fetch(url, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(xhrData),\r\n        })\r\n            .then(response => response.json())\r\n            .then((res) => {\r\n                if (res.error) {\r\n                    this.setState({\r\n                        isEditRole: false, showModal: false, roleName: '', roleId: '', showConfirmPopup: false,\r\n                        errorMessage: res.error, showError: true\r\n                    });\r\n                } else {\r\n                    this.setState({\r\n                        successMessage: res.message, showSuccess: true,\r\n                        isEditRole: false, showModal: false, roleName: '', roleId: '', showConfirmPopup: false\r\n                    }, () => this.fetchAllRoles());\r\n                }\r\n\r\n            })\r\n            .catch((error) => {\r\n                this.setState({errorMessage: error, showError: true})\r\n            });\r\n\r\n    }\r\n\r\n    onCheckboxClick = policyId => {\r\n        let _policies = this.state.policies;\r\n        _policies.forEach(p => delete p.allowed);\r\n        _policies = JSON.parse(JSON.stringify(_policies));\r\n        // const roleId = this.state.roleId;\r\n        // const selectedRole = _rolesList.find(role => role.roleid === roleId);\r\n        const selectedPolicy = _policies.find(policy => policy.id === policyId);\r\n        selectedPolicy.isAllowed = !selectedPolicy.isAllowed;\r\n        this.setState({policies: _policies});\r\n    }\r\n    addRole = () => {\r\n        const url = `${config.SERVER_BASE_URL}/v1/users/allpolicies`;\r\n        fetch(url, {\r\n            method: 'get',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                res.forEach(p => p.isAllowed = false);\r\n                this.setState({policies: res, isEditRole: false, showModal: true, roleName: '', roleId: ''})\r\n            })\r\n            .catch((error) => {\r\n                this.setState({errorMessage: error, showError: true})\r\n            });\r\n    }\r\n    getTableHeader = () => {\r\n        return (\r\n            <div className='role-table-header'>\r\n                <div>Role Management</div>\r\n                {checkRenderPermissions(permissions.CAN_ADD_ROLE, JSON.parse(localStorage.getItem('userpolicies'))) ?\r\n                    <Button variant='primary' onClick={this.addRole}>Add Role</Button> : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleToastClose = (stateName) => {\r\n        this.setState({[stateName]: false})\r\n    }\r\n\r\n    renderRoleManagement() {\r\n\r\n        const {showModal, roleId, roleName, policies, roleList, isEditRole, showConfirmPopup, tableHeader, showSuccess, successMessage, errorMessage, showError} = this.state;\r\n        let isDisabled = true;\r\n        const isOneSelected = policies.findIndex(p => p.isAllowed);\r\n        if (!isEditRole && roleName.trim() && isOneSelected !== -1) {\r\n            isDisabled = false;\r\n        } else if (isEditRole && roleName.trim() && isOneSelected !== -1) {\r\n            isDisabled = false;\r\n        }\r\n\r\n        const customHeight = `${window.innerHeight - 162}px`;\r\n        const customStyle = {height: customHeight}\r\n\r\n        const _header = this.getTableHeader();\r\n        return (\r\n\r\n            <div className='role-management app-center-body'>\r\n                {\r\n                    showSuccess\r\n                        ? <MyToast showToast={showSuccess} message={successMessage} isSuccessMessage={true}\r\n                                   handleClose={() => this.handleToastClose('showSuccess')}/>\r\n                        : null\r\n                }\r\n                {\r\n                    errorMessage && showError\r\n                        ? <MyToast showToast={showError} message={errorMessage} isSuccessMessage={false}\r\n                                   handleClose={() => this.handleToastClose('showError')}/>\r\n                        : null\r\n                }\r\n                <div className='role-management-child'>\r\n                    <ReactTable header={_header} tableHeader={tableHeader} rowData={roleList}\r\n                                handleColumnCLick={this.handleEditRole}/>\r\n                    <Modal size='lg' show={showModal} className={`${showConfirmPopup ? 'hide-user-popup' : ''} role-modal`}>\r\n                        <Modal.Header>\r\n                            <h5>{isEditRole ? 'Edit Role' : 'Add Role'}</h5>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <AddRole\r\n                                roleName={roleName}\r\n                                roleId={roleId}\r\n                                policies={policies}\r\n                                onInputChange={this.handleInputChange}\r\n                                onRoleChange={this.handleRoleChange}\r\n                                isEditRole={isEditRole}\r\n                                onCheckboxClick={this.onCheckboxClick}\r\n                            />\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            {checkRenderPermissions(permissions.CAN_DELETE_ROLE, JSON.parse(localStorage.getItem('userpolicies'))) && isEditRole ?\r\n                                <Button variant='danger' onClick={(e) => this.onDelete(e)}>Delete Role</Button> : null}\r\n                            <Button variant='secondary' onClick={(e) => this.onCancel(e)}>Cancel</Button>\r\n                            <Button disabled={isDisabled} variant='primary' onClick={(e) => this.onAddRoleClick(e)}>\r\n                                {isEditRole ? 'Update' : 'Add Role'}\r\n                            </Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n\r\n                    <Modal show={showConfirmPopup} className='delete-popup'>\r\n                        <Modal.Header>\r\n                            <strong>Do you really want to delete<br/>{roleName} ?</strong>\r\n                        </Modal.Header>\r\n                        <Modal.Footer>\r\n                            <Button variant='secondary' onClick={(e) => this.cancelDeleteRole(e)}>No</Button>\r\n                            <Button variant='danger' onClick={(e) => this.deleteRole(e)}>Yes</Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        let renderObj;\r\n\r\n        if (checkRenderPermissions(permissions.CAN_ACCESS_ROLE_MANAGEMENT, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            renderObj = this.renderRoleManagement();\r\n        } else {\r\n            renderObj =\r\n                <h1 class='unauthorized-header'>You do not have permission to view this page! Please contact your System\r\n                    Administrator!</h1>\r\n        }\r\n\r\n        return (\r\n            renderObj\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default RoleManagement;"]},"metadata":{},"sourceType":"module"}