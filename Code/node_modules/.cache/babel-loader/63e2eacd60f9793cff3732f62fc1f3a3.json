{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _dec,_class,_temp;import React from\"react\";import{inject,observer}from\"mobx-react\";import DatePicker from'react-datepicker';import moment from'moment';import{toJS}from\"mobx\";import ReactTable from\"../../PaginatedTable/ReactTable\";import AppTextbox from\"../../AppTextbox\";import{Button}from\"react-bootstrap\";import{checkRenderPermissions}from\"../../helpers\";import{permissions}from\"../../constants\";import AppToast from\"../../toast\";import'./ACHActivity.css';var ACHActivity=(_dec=inject('playerStore','claimStore'),_dec(_class=observer(_class=(_temp=/*#__PURE__*/function(_React$Component){_inherits(ACHActivity,_React$Component);var _super=_createSuper(ACHActivity);function ACHActivity(props){var _this;_classCallCheck(this,ACHActivity);_this=_super.call(this,props);_this.onClear=function(){_this.props.claimStore.clearTableData();// this.setState({\n//     startDate: null,\n//     endDate: null   ,\n//     batch: '',\n//     rejectFileReference: ''\n// }, () => this.props.claimStore.clearTableData());\n};_this.onSearchClick=function(){var _this$props$claimStor=_this.props.claimStore,startDate=_this$props$claimStor.startDate,endDate=_this$props$claimStor.endDate,batchNumber=_this$props$claimStor.batchNumber,rejectFileReference=_this$props$claimStor.rejectFileReference;var queryParams='?';if(startDate&&endDate){var sDate=moment(startDate).format('YYYY-MM-DD');var eDate=moment(endDate).format('YYYY-MM-DD');queryParams+=\"queryDateRangeStart=\".concat(sDate,\"&queryDateRangeEnd=\").concat(eDate);}if(batchNumber){queryParams+=\"&batchNumber=\".concat(batchNumber.toString());}if(rejectFileReference){queryParams+=\"&rejectFileReferenceNumber=\".concat(rejectFileReference);}_this.props.claimStore.getAchData(queryParams);};_this.setStartDate=function(newDate){if(newDate===null){_this.props.claimStore.setStartEndDate(null,null);// this.setState({endDate: null, startDate: null});\n}else{if(newDate>_this.state.endDate){_this.setStartEndDate(newDate,null);// this.setState({startDate: newDate, endDate: null});\n}else{_this.props.claimStore.setStartEndDate(newDate);_this.setState({startDate:newDate});}}};_this.setEndDate=function(newDate){_this.props.claimStore.setStartEndDate('',newDate);// this.setState({endDate: newDate})\n};_this.handleInputChange=function(e,stateName){if(stateName==='batchNumber'){// const re = /^[0-9\\b]+$/;\n// if (e.target.value === '' || (re.test(e.target.value) && e.target.value.length <= 7)) {\nif(e.target.value===''||e.target.value.length<=7){var _batchNumber=e.target.value;var isError=_batchNumber.length>0&&_batchNumber.length<7;_this.setState({invalidBatchNumberError:isError?'Batch Number should be 7 characters':''},function(){return _this.props.claimStore.setBatchNumber(_batchNumber);});}}else if(stateName==='rejectFileReference'){_this.props.claimStore.setRejectFileReference(e.target.value);// this.setState({[stateName]: e.target.value});\n}};_this.viewDetailsClick=function(data){if(data.batchnumber){_this.props.claimStore.setSelectedBatchId(data);_this.props.history.push('/finance/claims/batch/details');}else{_this.props.claimStore.setSelectedRejectReferenceNumber(data);_this.props.history.push('/finance/claims/reject/details');}};_this.state={userList:[],tableHeader:[],showToast:false,invalidBatchNumberError:''};return _this;}_createClass(ACHActivity,[{key:\"componentDidMount\",value:function componentDidMount(){// this.props.claimStore.clearTableData()\n}},{key:\"renderACHActivity\",value:function renderACHActivity(){var _this2=this;var _this$props$claimStor2=this.props.claimStore,tableHeader=_this$props$claimStor2.tableHeader,tableRows=_this$props$claimStor2.tableRows;var rows=toJS(JSON.parse(JSON.stringify(tableRows)));var headers=toJS(JSON.parse(JSON.stringify(tableHeader)));if(headers.length>0&&rows.length>0&&checkRenderPermissions(permissions.CAN_SEE_BATCH_REJECT_FILE_DETAILS,JSON.parse(localStorage.getItem('userpolicies')))){headers.push({key:'view',label:''});rows.forEach(function(row){row.view=/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this2.viewDetailsClick(row);},className:\"ach-link\"},\"View\");});}var invalidBatchNumberError=this.state.invalidBatchNumberError;var _this$props$claimStor3=this.props.claimStore,startDate=_this$props$claimStor3.startDate,endDate=_this$props$claimStor3.endDate,batchNumber=_this$props$claimStor3.batchNumber,rejectFileReference=_this$props$claimStor3.rejectFileReference;var isDisabled=true;if(startDate&&endDate||batchNumber&&batchNumber.length===7||rejectFileReference){isDisabled=false;}return/*#__PURE__*/React.createElement(\"div\",{className:\"ach-activity-container container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-activity-panel player-search-child\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-filter-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-input-label ach-date-label\"},\"Start Date\"),/*#__PURE__*/React.createElement(DatePicker,{selected:startDate,isClearable:true,maxDate:new Date(),onChange:function onChange(date){return _this2.setStartDate(date);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"ach-flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-input-label ach-date-label\"},\"End Date\"),/*#__PURE__*/React.createElement(DatePicker,{isClearable:true,selected:endDate,disabled:!startDate,minDate:startDate,maxDate:new Date(),onChange:function onChange(date){return _this2.setEndDate(date);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"ach-flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-input-label\"},\"Batch #\"),/*#__PURE__*/React.createElement(AppTextbox,{type:\"text\",value:batchNumber,onChange:function onChange(e){return _this2.handleInputChange(e,'batchNumber');}}),invalidBatchNumberError?/*#__PURE__*/React.createElement(\"div\",{className:\"ach-error-message\"},invalidBatchNumberError):null),/*#__PURE__*/React.createElement(\"div\",{className:\"ach-flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ach-input-label\"},\"Reject File Ref#\"),/*#__PURE__*/React.createElement(AppTextbox,{type:\"text\",value:rejectFileReference,onChange:function onChange(e){return _this2.handleInputChange(e,'rejectFileReference');}})),/*#__PURE__*/React.createElement(\"div\",{className:\"ach-flex-column\"},/*#__PURE__*/React.createElement(Button,{disabled:isDisabled||invalidBatchNumberError!=='',className:\"player-search-btn\",onClick:function onClick(){return _this2.onSearchClick();}},\"Search\"),/*#__PURE__*/React.createElement(Button,{className:\"player-search-btn\",onClick:function onClick(){return _this2.onClear();}},\"Clear\")))),tableHeader&&tableHeader.length>0?/*#__PURE__*/React.createElement(ReactTable,{tableHeader:headers,rowData:rows,className:\"ach-update-user-table\"}):null);}},{key:\"render\",value:function render(){var renderObj;if(checkRenderPermissions(permissions.CAN_SEE_ACH_ACTIVITY,JSON.parse(localStorage.getItem('userpolicies')))){renderObj=this.renderACHActivity();}else{renderObj=/*#__PURE__*/React.createElement(\"h3\",{class:\"unauthorized-header\"},\"You do not have permission to view this page! Please contact your System Administrator!\");}return renderObj;}}]);return ACHActivity;}(React.Component),_temp))||_class)||_class);export default ACHActivity;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/Capstone/lottery/mslc-backoffice-client/v1/Code/src/Finance/ACHActivity/ACHActivity.js"],"names":["React","inject","observer","DatePicker","moment","toJS","ReactTable","AppTextbox","Button","checkRenderPermissions","permissions","AppToast","ACHActivity","props","onClear","claimStore","clearTableData","onSearchClick","startDate","endDate","batchNumber","rejectFileReference","queryParams","sDate","format","eDate","toString","getAchData","setStartDate","newDate","setStartEndDate","state","setState","setEndDate","handleInputChange","e","stateName","target","value","length","_batchNumber","isError","invalidBatchNumberError","setBatchNumber","setRejectFileReference","viewDetailsClick","data","batchnumber","setSelectedBatchId","history","push","setSelectedRejectReferenceNumber","userList","tableHeader","showToast","tableRows","rows","JSON","parse","stringify","headers","CAN_SEE_BATCH_REJECT_FILE_DETAILS","localStorage","getItem","key","label","forEach","row","view","isDisabled","Date","date","renderObj","CAN_SEE_ACH_ACTIVITY","renderACHActivity","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport DatePicker from 'react-datepicker';\r\nimport moment from 'moment';\r\nimport {toJS} from \"mobx\";\r\n\r\nimport ReactTable from \"../../PaginatedTable/ReactTable\";\r\nimport AppTextbox from \"../../AppTextbox\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {checkRenderPermissions} from \"../../helpers\";\r\nimport {permissions} from \"../../constants\";\r\nimport AppToast from \"../../toast\";\r\n\r\nimport './ACHActivity.css';\r\n\r\n@inject('playerStore', 'claimStore')\r\n@observer\r\nclass ACHActivity extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userList: [],\r\n            tableHeader: [],\r\n            showToast: false,\r\n            invalidBatchNumberError: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.props.claimStore.clearTableData()\r\n    }\r\n\r\n\r\n    onClear = () => {\r\n        this.props.claimStore.clearTableData()\r\n        // this.setState({\r\n        //     startDate: null,\r\n        //     endDate: null   ,\r\n        //     batch: '',\r\n        //     rejectFileReference: ''\r\n        // }, () => this.props.claimStore.clearTableData());\r\n    }\r\n\r\n    onSearchClick = () => {\r\n        const {startDate, endDate, batchNumber, rejectFileReference} = this.props.claimStore;\r\n        let queryParams = '?';\r\n        if (startDate && endDate) {\r\n            const sDate = moment(startDate).format('YYYY-MM-DD');\r\n            const eDate = moment(endDate).format('YYYY-MM-DD');\r\n            queryParams += `queryDateRangeStart=${sDate}&queryDateRangeEnd=${eDate}`;\r\n        }\r\n        if(batchNumber) {\r\n            queryParams += `&batchNumber=${batchNumber.toString()}`;\r\n        }\r\n        if(rejectFileReference) {\r\n            queryParams += `&rejectFileReferenceNumber=${rejectFileReference}`;\r\n        }\r\n        this.props.claimStore.getAchData(queryParams);\r\n\r\n    }\r\n\r\n    setStartDate = (newDate) => {\r\n        if(newDate === null) {\r\n            this.props.claimStore.setStartEndDate(null, null);\r\n            // this.setState({endDate: null, startDate: null});\r\n        } else {\r\n            if(newDate > this.state.endDate) {\r\n                this.setStartEndDate(newDate, null);\r\n                // this.setState({startDate: newDate, endDate: null});\r\n            } else {\r\n                this.props.claimStore.setStartEndDate(newDate);\r\n                this.setState({startDate: newDate});\r\n            }\r\n        }\r\n    }\r\n\r\n    setEndDate = (newDate) => {\r\n        this.props.claimStore.setStartEndDate('', newDate);\r\n        // this.setState({endDate: newDate})\r\n    }\r\n\r\n    handleInputChange = (e, stateName) => {\r\n        if (stateName === 'batchNumber') {\r\n            // const re = /^[0-9\\b]+$/;\r\n            // if (e.target.value === '' || (re.test(e.target.value) && e.target.value.length <= 7)) {\r\n            if (e.target.value === '' ||  e.target.value.length <= 7) {\r\n                const _batchNumber = e.target.value;\r\n                const isError = _batchNumber.length > 0 && _batchNumber.length < 7;\r\n                this.setState({\r\n                    invalidBatchNumberError: isError ? 'Batch Number should be 7 characters' : ''\r\n                }, () => this.props.claimStore.setBatchNumber(_batchNumber));\r\n            }\r\n        } else if(stateName === 'rejectFileReference') {\r\n            this.props.claimStore.setRejectFileReference(e.target.value)\r\n            // this.setState({[stateName]: e.target.value});\r\n        }\r\n\r\n    }\r\n\r\n    viewDetailsClick = (data) => {\r\n        if(data.batchnumber) {\r\n            this.props.claimStore.setSelectedBatchId(data);\r\n            this.props.history.push('/finance/claims/batch/details');\r\n        } else {\r\n            this.props.claimStore.setSelectedRejectReferenceNumber(data);\r\n            this.props.history.push('/finance/claims/reject/details');\r\n        }\r\n\r\n    }\r\n\r\n    renderACHActivity() {\r\n        const {tableHeader, tableRows} = this.props.claimStore;\r\n        const rows = toJS(JSON.parse(JSON.stringify(tableRows)));\r\n        const headers = toJS(JSON.parse(JSON.stringify(tableHeader)));\r\n        if(headers.length > 0 && rows.length > 0 &&\r\n            checkRenderPermissions(permissions.CAN_SEE_BATCH_REJECT_FILE_DETAILS, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            headers.push({key: 'view', label: ''});\r\n            rows.forEach(row => {\r\n                row.view = <a onClick={() => this.viewDetailsClick(row)} className='ach-link'>View</a>\r\n            })\r\n        }\r\n        const { invalidBatchNumberError } = this.state;\r\n        const {startDate, endDate, batchNumber, rejectFileReference} = this.props.claimStore;\r\n        let isDisabled = true;\r\n        if((startDate && endDate) || (batchNumber && batchNumber.length === 7) || rejectFileReference) {\r\n            isDisabled = false;\r\n        }\r\n        return (\r\n            <div className='ach-activity-container container-fluid'>\r\n                <div className='ach-activity-panel player-search-child'>\r\n                    <div className='ach-filter-section'>\r\n                        <div className='ach-flex-column'>\r\n                            <div className='ach-input-label ach-date-label'>Start Date</div>\r\n                            <DatePicker\r\n                                selected={startDate}\r\n                                isClearable\r\n                                maxDate={new Date()}\r\n                                onChange={date => this.setStartDate(date)}\r\n                            />\r\n                        </div>\r\n                        <div className='ach-flex-column'>\r\n                            <div className='ach-input-label ach-date-label'>End Date</div>\r\n                            <DatePicker\r\n                                isClearable\r\n                                selected={endDate}\r\n                                disabled={!startDate}\r\n                                minDate={startDate}\r\n                                maxDate={new Date()}\r\n                                onChange={date => this.setEndDate(date)}\r\n                            />\r\n                        </div>\r\n                        <div className='ach-flex-column'>\r\n                            <div className='ach-input-label'>Batch #</div>\r\n                            <AppTextbox type='text' value={batchNumber}\r\n                                        onChange={(e) => this.handleInputChange(e, 'batchNumber')}/>\r\n                            {invalidBatchNumberError ? <div className='ach-error-message'>{invalidBatchNumberError}</div>: null}\r\n                        </div>\r\n                        <div className='ach-flex-column'>\r\n                            <div className='ach-input-label'>Reject File Ref#</div>\r\n                            <AppTextbox type='text' value={rejectFileReference}\r\n                                        onChange={(e) => this.handleInputChange(e, 'rejectFileReference')}/>\r\n                        </div>\r\n                        <div className='ach-flex-column'>\r\n                            <Button disabled={isDisabled || invalidBatchNumberError !== ''} className='player-search-btn' onClick={() => this.onSearchClick()}>\r\n                                Search\r\n                            </Button>\r\n                            <Button className='player-search-btn' onClick={() => this.onClear()}>\r\n                                Clear\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {\r\n                    tableHeader && tableHeader.length > 0\r\n                        ? <ReactTable tableHeader={headers} rowData={rows} className='ach-update-user-table'/>\r\n                        : null\r\n                }\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    render() {\r\n        let renderObj;\r\n        if (checkRenderPermissions(permissions.CAN_SEE_ACH_ACTIVITY, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            renderObj = this.renderACHActivity();\r\n        } else {\r\n            renderObj =\r\n                <h3 class='unauthorized-header'>You do not have permission to view this page! Please contact your System\r\n                    Administrator!</h3>\r\n        }\r\n\r\n        return (\r\n            renderObj\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ACHActivity;\r\n"]},"metadata":{},"sourceType":"module"}