{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\src\\\\Claims\\\\claimresearch\\\\ClaimResearch.js\";\nimport React from \"react\";\nimport './ClaimResearch.css';\nimport { checkRenderPermissions } from \"../../helpers\";\nimport { permissions } from \"../../constants\";\nimport AppToast from \"../../toast\";\nimport ClaimSearch from \"../claimsearch\";\nimport config from \"../../config\";\nimport ReactTable from \"../../PaginatedTable/ReactTable\";\n\nclass ClaimResearch extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onToastClose = () => {\n      this.setState({\n        showToast: false\n      });\n    };\n\n    this.handleSelectClick = (event, id) => {\n      event.preventDefault();\n      this.props.history.push(`/claim/view/${id}`);\n    };\n\n    this.setTableData = data => {\n      if (data.length === 0) {\n        this.setState({\n          showToast: true,\n          userList: [],\n          tableHeader: []\n        });\n      } else {\n        const rows = data.map((d, index) => {\n          d.idField = index + 1;\n          d.select = checkRenderPermissions(permissions.DO_CLAIM_RESEARCH, JSON.parse(localStorage.getItem('userpolicies'))) ? /*#__PURE__*/React.createElement(\"a\", {\n            onClick: e => this.handleSelectClick(e, d.id),\n            href: \"\",\n            className: \"select-link\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 21\n            }\n          }, \"View\") : null;\n          return d;\n        });\n        this.setState({\n          userList: rows\n        });\n      }\n    };\n\n    this.onSearchClick = (firstName = '', lastName = '', drawDate = '', ticketStatus = '', paymentStatus = '') => {\n      let queryParams = 'limit=50';\n\n      if (firstName && firstName !== '') {\n        queryParams += `&firstname=${firstName}`;\n      }\n\n      if (lastName && lastName !== '') {\n        queryParams += `&lastname=${lastName}`;\n      }\n\n      if (drawDate && drawDate !== '') {\n        queryParams += `&drawdate=${drawDate}`;\n      }\n\n      if (ticketStatus && ticketStatus !== '') {\n        queryParams += `&ticketstatus=${ticketStatus}`;\n      }\n\n      if (paymentStatus && paymentStatus !== '') {\n        queryParams += `&paymentstatus=${paymentStatus}`;\n      }\n\n      fetch(`${config.SERVER_BASE_URL}/v1/claim/search?${queryParams}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(res => {\n        if (res && res.error) {\n          this.setState({\n            errorMessage: res.error\n          });\n        } else {\n          this.setTableData(res);\n        }\n      }).catch(error => {\n        this.setState({\n          errorMessage: error.toString()\n        });\n      });\n    };\n\n    this.state = {\n      userList: [],\n      tableHeader: [{\n        key: 'ticketnumber',\n        label: 'Ticket#'\n      }, {\n        key: 'firstname',\n        label: 'First Name'\n      }, {\n        key: 'lastname',\n        label: 'Last Name'\n      }, {\n        key: 'drawdate',\n        label: 'Draw date'\n      }, {\n        key: 'ticketstatus',\n        label: 'Ticket Status'\n      }, {\n        key: 'select',\n        label: 'View'\n      }],\n      showToast: false\n    };\n  }\n\n  componentDidMount() {}\n\n  renderClaimResearch() {\n    const {\n      tableHeader,\n      userList,\n      showToast\n    } = this.state;\n    const msg = 'No Results found.';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"claim-search-container container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"claim-search-panel claim-search-child\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ClaimSearch, {\n      handleSearchClick: this.onSearchClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    })), userList && userList.length > 0 && tableHeader ? /*#__PURE__*/React.createElement(ReactTable, {\n      tableHeader: tableHeader,\n      rowData: userList,\n      className: \"update-user-table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 27\n      }\n    }) : null, showToast ? /*#__PURE__*/React.createElement(AppToast, {\n      showToast: showToast,\n      message: msg,\n      isSuccessMessage: true,\n      handleClose: this.onToastClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 33\n      }\n    }) : null);\n  }\n\n  render() {\n    var renderObj;\n\n    if (checkRenderPermissions(permissions.SEE_CLAIM_SUPPORT, JSON.parse(localStorage.getItem('userpolicies'))) && checkRenderPermissions(permissions.DO_CLAIM_RESEARCH, JSON.parse(localStorage.getItem('userpolicies')))) {\n      renderObj = this.renderClaimResearch();\n    } else {\n      renderObj = /*#__PURE__*/React.createElement(\"h1\", {\n        class: \"unauthorized-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }\n      }, \"You do not have permission to view this page! Please contact your System Administrator!\");\n    }\n\n    return renderObj;\n  }\n\n}\n\nexport default ClaimResearch;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/Capstone/lottery/mslc-backoffice-client/v1/Code/src/Claims/claimresearch/ClaimResearch.js"],"names":["React","checkRenderPermissions","permissions","AppToast","ClaimSearch","config","ReactTable","ClaimResearch","Component","constructor","props","onToastClose","setState","showToast","handleSelectClick","event","id","preventDefault","history","push","setTableData","data","length","userList","tableHeader","rows","map","d","index","idField","select","DO_CLAIM_RESEARCH","JSON","parse","localStorage","getItem","e","onSearchClick","firstName","lastName","drawDate","ticketStatus","paymentStatus","queryParams","fetch","SERVER_BASE_URL","method","headers","then","response","json","res","error","errorMessage","catch","toString","state","key","label","componentDidMount","renderClaimResearch","msg","render","renderObj","SEE_CLAIM_SUPPORT"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport './ClaimResearch.css';\r\nimport {checkRenderPermissions} from \"../../helpers\";\r\nimport {permissions} from \"../../constants\";\r\nimport AppToast from \"../../toast\";\r\nimport ClaimSearch from \"../claimsearch\";\r\nimport config from \"../../config\";\r\nimport ReactTable from \"../../PaginatedTable/ReactTable\";\r\n\r\nclass ClaimResearch extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userList: [],\r\n            tableHeader: [\r\n                {key: 'ticketnumber', label: 'Ticket#'},\r\n                {key: 'firstname', label: 'First Name'},\r\n                {key: 'lastname', label: 'Last Name'},\r\n                {key: 'drawdate', label: 'Draw date'},\r\n                {key: 'ticketstatus', label: 'Ticket Status'},\r\n                {key: 'select', label: 'View'}\r\n            ],\r\n            showToast: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    onToastClose = () => {\r\n        this.setState({showToast: false});\r\n    }\r\n\r\n    handleSelectClick = (event, id) => {\r\n        event.preventDefault();\r\n        this.props.history.push(`/claim/view/${id}`);\r\n    }\r\n\r\n    setTableData = (data) => {\r\n        if (data.length === 0) {\r\n            this.setState({showToast: true, userList: [], tableHeader: []});\r\n        } else {\r\n            const rows = data.map((d, index) => {\r\n                d.idField = index + 1;\r\n                d.select = checkRenderPermissions(permissions.DO_CLAIM_RESEARCH, JSON.parse(localStorage.getItem('userpolicies'))) ?\r\n                    <a onClick={(e) => this.handleSelectClick(e, d.id)} href='' className='select-link'>View</a> : null;\r\n                return d;\r\n            });\r\n\r\n            this.setState({userList: rows});\r\n        }\r\n    }\r\n\r\n    onSearchClick = (firstName = '', lastName = '', drawDate = '', ticketStatus = '', paymentStatus = '') => {\r\n\r\n        let queryParams = 'limit=50';\r\n        if (firstName && firstName !== '') {\r\n            queryParams += `&firstname=${firstName}`\r\n        }\r\n        if (lastName && lastName !== '') {\r\n            queryParams += `&lastname=${lastName}`\r\n        }\r\n        if (drawDate && drawDate !== '') {\r\n            queryParams += `&drawdate=${drawDate}`\r\n        }\r\n        if (ticketStatus && ticketStatus !== '') {\r\n            queryParams += `&ticketstatus=${ticketStatus}`\r\n        }\r\n        if (paymentStatus && paymentStatus !== '') {\r\n            queryParams += `&paymentstatus=${paymentStatus}`\r\n        }\r\n\r\n        fetch(`${config.SERVER_BASE_URL}/v1/claim/search?${queryParams}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                if (res && res.error) {\r\n                    this.setState({errorMessage: res.error});\r\n                } else {\r\n                    this.setTableData(res);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.setState({errorMessage: error.toString()});\r\n            });\r\n    }\r\n\r\n    renderClaimResearch() {\r\n        const {tableHeader, userList, showToast} = this.state;\r\n        const msg = 'No Results found.';\r\n        return (\r\n            <div className='claim-search-container container-fluid'>\r\n                <div className='claim-search-panel claim-search-child'>\r\n                    <ClaimSearch handleSearchClick={this.onSearchClick}/>\r\n                </div>\r\n                {\r\n                    userList && userList.length > 0 && tableHeader\r\n                        ? <ReactTable tableHeader={tableHeader} rowData={userList} className='update-user-table'/>\r\n                        : null\r\n                }\r\n                {\r\n                    showToast ? <AppToast showToast={showToast} message={msg} isSuccessMessage={true}\r\n                                          handleClose={this.onToastClose}/> : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        var renderObj;\r\n\r\n        if (checkRenderPermissions(permissions.SEE_CLAIM_SUPPORT, JSON.parse(localStorage.getItem('userpolicies'))) &&\r\n            checkRenderPermissions(permissions.DO_CLAIM_RESEARCH, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            renderObj = this.renderClaimResearch();\r\n        } else {\r\n            renderObj =\r\n                <h1 class='unauthorized-header'>You do not have permission to view this page! Please contact your System\r\n                    Administrator!</h1>\r\n        }\r\n\r\n        return (\r\n            renderObj\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ClaimResearch;\r\n"]},"metadata":{},"sourceType":"module"}