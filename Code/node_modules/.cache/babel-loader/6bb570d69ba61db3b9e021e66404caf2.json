{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _dec,_class,_temp;import React from\"react\";import{inject,observer}from\"mobx-react\";import AppToast from\"../../toast\";import AuditSearch from\"../AuditSearch\";import config from\"../../config\";import{UserAction,UserActionCategory}from\"../../UserActionCategory\";import ReactTable from\"../../PaginatedTable/ReactTable\";var ActionAudit=(_dec=inject('playerStore','authStore'),_dec(_class=observer(_class=(_temp=/*#__PURE__*/function(_React$Component){_inherits(ActionAudit,_React$Component);var _super=_createSuper(ActionAudit);function ActionAudit(props){var _this;_classCallCheck(this,ActionAudit);_this=_super.call(this,props);_this.handleToastClose=function(){_this.props.playerStore.setToast(false);};_this.onSearchClick=function(){var startDate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var endDate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var action=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';startDate.setHours(0,0,0,0);startDate=new Date(startDate).toUTCString();endDate.setHours(0,0,0,0);endDate=new Date(endDate).toUTCString();var queryParams='?';if(startDate&&startDate!==''){queryParams+=\"startDate=\".concat(startDate);}if(endDate&&endDate!==''){if(queryParams.endsWith(\"?\"))queryParams+=\"endDate=\".concat(endDate);else queryParams+=\"&endDate=\".concat(endDate);}if(action&&action!==''){if(queryParams.endsWith(\"?\"))queryParams+=\"action=\".concat(action);else queryParams+=\"&action=\".concat(action);}_this.props.playerStore.searchUserAuditActions(queryParams);};return _this;}_createClass(ActionAudit,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.props.match.params.id;var username=this.props.playerStore.selectedBackofficeUserName;this.props.playerStore.AuditActionsTableHeader=null;this.props.playerStore.AuditActionsTableRows=null;fetch(\"\".concat(config.SERVER_BASE_URL,\"/v1/user/\").concat(id),{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(res){if(res){var firstname=res.firstname,lastname=res.lastname;_this2.props.playerStore.UserNameTitleText=\"User: \".concat(firstname,\" \").concat(lastname);}}).catch(function(error){var errorMessage=error.toString();});this.props.playerStore.logAction(UserActionCategory.PAGE_VIEW,UserAction.USER_AUDIT_HISTORY_PAGE,username);}},{key:\"renderActionAudit\",value:function renderActionAudit(){var _this3=this;var _this$props$playerSto=this.props.playerStore,AuditActionsTableHeader=_this$props$playerSto.AuditActionsTableHeader,AuditActionsTableRows=_this$props$playerSto.AuditActionsTableRows,showToast=_this$props$playerSto.showToast,successMessage=_this$props$playerSto.successMessage,errorMessage=_this$props$playerSto.errorMessage;var Timestamp;var rows=AuditActionsTableRows&&AuditActionsTableRows.map(function(d,index){d.idField=index+1;Timestamp=\"\".concat(d.timestamp);d.date=Timestamp.substring(0,10);d.time=Timestamp.substring(11,19);d.actions=\"\".concat(d.category,\" : \").concat(d.action);d.data=d.comments?\"\".concat(d.result,\" : \").concat(d.comments):\"\".concat(d.result);return d;});return/*#__PURE__*/React.createElement(\"div\",{className:\"player-search-container container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"player-search-panel player-search-child\"},/*#__PURE__*/React.createElement(AuditSearch,Object.assign({tableHeader:AuditActionsTableHeader,userList:rows,handleSearchClick:this.onSearchClick},this.props))),AuditActionsTableHeader&&rows?/*#__PURE__*/React.createElement(ReactTable,{tableHeader:AuditActionsTableHeader,rowData:rows,className:\"update-user-table\"}):null,showToast?/*#__PURE__*/React.createElement(AppToast,{showToast:showToast,message:successMessage?successMessage:errorMessage,isSuccessMessage:successMessage!==null,handleClose:function handleClose(){return _this3.handleToastClose();}}):null);}},{key:\"render\",value:function render(){var renderObj;if(true){renderObj=this.renderActionAudit();}else{renderObj=/*#__PURE__*/React.createElement(\"h1\",{class:\"unauthorized-header\"},\"You do not have permission to view this page! Please contact your System Administrator!\");}return renderObj;}}]);return ActionAudit;}(React.Component),_temp))||_class)||_class);export default ActionAudit;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/ReactExampleCode/test-typescript-compile-within-a-javascript-project/Code/src/users/ActionAudit/ActionAudit.js"],"names":["React","inject","observer","AppToast","AuditSearch","config","UserAction","UserActionCategory","ReactTable","ActionAudit","props","handleToastClose","playerStore","setToast","onSearchClick","startDate","endDate","action","setHours","Date","toUTCString","queryParams","endsWith","searchUserAuditActions","id","match","params","username","selectedBackofficeUserName","AuditActionsTableHeader","AuditActionsTableRows","fetch","SERVER_BASE_URL","method","headers","localStorage","getItem","then","response","json","res","firstname","lastname","UserNameTitleText","catch","error","errorMessage","toString","logAction","PAGE_VIEW","USER_AUDIT_HISTORY_PAGE","showToast","successMessage","Timestamp","rows","map","d","index","idField","timestamp","date","substring","time","actions","category","data","comments","result","renderObj","renderActionAudit","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport AppToast from \"../../toast\";\r\nimport AuditSearch from \"../AuditSearch\";\r\nimport config from \"../../config\";\r\nimport {UserAction, UserActionCategory} from \"../../UserActionCategory\";\r\nimport ReactTable from \"../../PaginatedTable/ReactTable\";\r\n\r\n@inject('playerStore', 'authStore')\r\n@observer\r\nclass ActionAudit extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const id = (this.props.match.params.id);\r\n        const username = this.props.playerStore.selectedBackofficeUserName;\r\n        this.props.playerStore.AuditActionsTableHeader = null;\r\n        this.props.playerStore.AuditActionsTableRows = null;\r\n        fetch(`${config.SERVER_BASE_URL}/v1/user/${id}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n        })\r\n            .then(response => response.json())\r\n            .then(res => {\r\n                if (res) {\r\n                    const {firstname, lastname} = res;\r\n                    this.props.playerStore.UserNameTitleText = `User: ${firstname} ${lastname}`;\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                let errorMessage = error.toString();\r\n            });\r\n        this.props.playerStore.logAction(UserActionCategory.PAGE_VIEW, UserAction.USER_AUDIT_HISTORY_PAGE, username);\r\n    }\r\n\r\n    handleToastClose = () => {\r\n        this.props.playerStore.setToast(false);\r\n    }\r\n\r\n    onSearchClick = (startDate='', endDate='', action='') => {\r\n\r\n        startDate.setHours(0,0,0,0);\r\n        startDate = new Date(startDate).toUTCString();\r\n        endDate.setHours(0,0,0,0);\r\n        endDate = new Date(endDate).toUTCString();\r\n\r\n        let queryParams = '?';\r\n        if (startDate && startDate !== '') {\r\n            queryParams += `startDate=${startDate}`\r\n        }\r\n        if (endDate && endDate !== '') {\r\n            if (queryParams.endsWith(\"?\"))\r\n                queryParams += `endDate=${endDate}`\r\n            else\r\n                queryParams += `&endDate=${endDate}`\r\n        }\r\n        if (action && action !== '') {\r\n            if (queryParams.endsWith(\"?\"))\r\n                queryParams += `action=${action}`\r\n            else\r\n                queryParams += `&action=${action}`\r\n        }\r\n\r\n        this.props.playerStore.searchUserAuditActions(queryParams);\r\n    }\r\n\r\n    renderActionAudit() {\r\n        const {AuditActionsTableHeader, AuditActionsTableRows, showToast, successMessage, errorMessage} = this.props.playerStore;\r\n        let Timestamp;\r\n        const rows = AuditActionsTableRows && AuditActionsTableRows.map((d, index) => {\r\n            d.idField = index + 1;\r\n            Timestamp = `${d.timestamp}`\r\n            d.date = Timestamp.substring(0, 10)\r\n            d.time = Timestamp.substring(11, 19)\r\n            d.actions = `${d.category} : ${d.action}`\r\n            d.data =  d.comments ? `${d.result} : ${d.comments}` : `${d.result}`\r\n            return d;\r\n        });\r\n        return (\r\n            <div className='player-search-container container-fluid'>\r\n                <div className='player-search-panel player-search-child'>\r\n                    <AuditSearch tableHeader={AuditActionsTableHeader} userList={rows} handleSearchClick={this.onSearchClick} {...this.props}/>\r\n                </div>\r\n                {\r\n                    AuditActionsTableHeader && rows\r\n                        ? <ReactTable tableHeader={AuditActionsTableHeader} rowData={rows} className='update-user-table'/>\r\n                        : null\r\n                }\r\n                {showToast\r\n                    ?\r\n                    <AppToast showToast={showToast}\r\n                              message={successMessage ? successMessage : errorMessage}\r\n                              isSuccessMessage={successMessage !== null}\r\n                              handleClose={() => this.handleToastClose()}/>\r\n                    : null\r\n                }\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    render() {\r\n        let renderObj;\r\n        if (true) {\r\n            renderObj = this.renderActionAudit();\r\n        } else {\r\n            renderObj =\r\n                <h1 class='unauthorized-header'>You do not have permission to view this page! Please contact your System\r\n                    Administrator!</h1>\r\n        }\r\n\r\n        return (\r\n            renderObj\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ActionAudit;\r\n"]},"metadata":{},"sourceType":"module"}