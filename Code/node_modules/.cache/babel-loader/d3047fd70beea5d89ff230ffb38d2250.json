{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _dec,_class,_temp;import React from\"react\";import{inject,observer}from\"mobx-react\";import'./Tabs.css';import TicketSearch from\"../../Ticket/SearchBar\";import{UserAction,UserActionCategory}from\"../../UserActionCategory\";import moment from\"moment\";import ReactTable from\"../../PaginatedTable/ReactTable\";var TicketHistory=(_dec=inject('playerStore'),_dec(_class=observer(_class=(_temp=/*#__PURE__*/function(_React$Component){_inherits(TicketHistory,_React$Component);var _super=_createSuper(TicketHistory);function TicketHistory(props){var _this;_classCallCheck(this,TicketHistory);_this=_super.call(this,props);_this.onSearchClick=function(){var queryDateRangeStart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var queryDateRangeEnd=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var startDate=new Date(queryDateRangeStart);var momentStartDate=moment(startDate).format();var endDate=new Date(queryDateRangeEnd);endDate.setHours(23,59,59);var momentEndDate=moment(endDate).format();var queryParams='?';if(queryDateRangeStart&&queryDateRangeStart!==''){queryParams+=\"queryDateRangeStart=\".concat(momentStartDate);}if(queryDateRangeEnd&&queryDateRangeEnd!==''){if(queryParams.endsWith(\"?\"))queryParams+=\"queryDateRangeEnd=\".concat(momentEndDate);else queryParams+=\"&queryDateRangeEnd=\".concat(momentEndDate);}// Log User Action\nvar criteria=\"Start Date: \".concat(momentStartDate,\" End Date: \").concat(momentEndDate);_this.props.playerStore.logAction(UserActionCategory.API_CALL,UserAction.TICKET_HISTORY,'',criteria);_this.props.playerStore.searchTickets(queryParams);};_this.onFilterClick=function(){_this.props.playerStore.filterTicketHistoryResult();};_this.handleToastClose=function(){_this.props.playerStore.setTicketHistoryToast(false);};_this.state={ticketHistoryList:[],tableHeader:[]};return _this;}_createClass(TicketHistory,[{key:\"componentDidMount\",value:function componentDidMount(){var startDate=new Date();startDate.setDate(startDate.getDate()-31);this.onSearchClick(startDate,new Date());}},{key:\"render\",value:function render(){var _this$props$playerSto=this.props.playerStore,ticketHistoryTableHeader=_this$props$playerSto.ticketHistoryTableHeader,ticketHistoryTableRows=_this$props$playerSto.ticketHistoryTableRows,showTicketHistoryToast=_this$props$playerSto.showTicketHistoryToast,successMessage=_this$props$playerSto.successMessage,errorMessage=_this$props$playerSto.errorMessage;var Timestamp;var rows=ticketHistoryTableRows&&ticketHistoryTableRows.map(function(d,index){d.idField=index+1;Timestamp=\"\".concat(d.requestTimestamp);d.date=Timestamp.substring(0,10);d.time=Timestamp.substring(11,19);d.amount=isNaN(\"\".concat(d.prizeAmount))?\"\".concat(d.prizeAmount):(Number(\"\".concat(d.prizeAmount))/100).toFixed(2);return d;});return/*#__PURE__*/React.createElement(\"div\",{className:\"player-search-container container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"player-search-panel player-search-child\"},/*#__PURE__*/React.createElement(TicketSearch,Object.assign({tableHeader:ticketHistoryTableHeader,userList:rows,handleSearchClick:this.onSearchClick,handleFilterClick:this.onFilterClick},this.props))),ticketHistoryTableHeader&&rows?/*#__PURE__*/React.createElement(ReactTable,{tableHeader:ticketHistoryTableHeader,rowData:rows,className:\"update-user-table\"}):null);}}]);return TicketHistory;}(React.Component),_temp))||_class)||_class);export default TicketHistory;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/Capstone/lottery/mslc-backoffice-client/v1/Code/src/Player/Tabs/TicketHistory.js"],"names":["React","inject","observer","TicketSearch","UserAction","UserActionCategory","moment","ReactTable","TicketHistory","props","onSearchClick","queryDateRangeStart","queryDateRangeEnd","startDate","Date","momentStartDate","format","endDate","setHours","momentEndDate","queryParams","endsWith","criteria","playerStore","logAction","API_CALL","TICKET_HISTORY","searchTickets","onFilterClick","filterTicketHistoryResult","handleToastClose","setTicketHistoryToast","state","ticketHistoryList","tableHeader","setDate","getDate","ticketHistoryTableHeader","ticketHistoryTableRows","showTicketHistoryToast","successMessage","errorMessage","Timestamp","rows","map","d","index","idField","requestTimestamp","date","substring","time","amount","isNaN","prizeAmount","Number","toFixed","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport './Tabs.css';\r\nimport TicketSearch from \"../../Ticket/SearchBar\";\r\nimport {UserAction, UserActionCategory} from \"../../UserActionCategory\";\r\nimport moment from \"moment\";\r\nimport ReactTable from \"../../PaginatedTable/ReactTable\";\r\n\r\n@inject('playerStore')\r\n@observer\r\nclass TicketHistory extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ticketHistoryList: [],\r\n            tableHeader: []\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let startDate = new Date();\r\n        startDate.setDate(startDate.getDate() - 31)\r\n        this.onSearchClick(startDate, new Date());\r\n    }\r\n\r\n    onSearchClick = (queryDateRangeStart = '', queryDateRangeEnd = '') => {\r\n\r\n        const startDate = new Date(queryDateRangeStart);\r\n        const momentStartDate = moment(startDate).format();\r\n        const endDate = new Date(queryDateRangeEnd);\r\n        endDate.setHours(23, 59, 59);\r\n        const momentEndDate = moment(endDate).format();\r\n\r\n        let queryParams = '?';\r\n        if (queryDateRangeStart && queryDateRangeStart !== '') {\r\n            queryParams += `queryDateRangeStart=${momentStartDate}`\r\n        }\r\n        if (queryDateRangeEnd && queryDateRangeEnd !== '') {\r\n            if (queryParams.endsWith(\"?\"))\r\n                queryParams += `queryDateRangeEnd=${momentEndDate}`\r\n            else\r\n                queryParams += `&queryDateRangeEnd=${momentEndDate}`\r\n        }\r\n\r\n        // Log User Action\r\n\r\n        let criteria = `Start Date: ${momentStartDate} End Date: ${momentEndDate}`\r\n        this.props.playerStore.logAction(UserActionCategory.API_CALL, UserAction.TICKET_HISTORY, '', criteria)\r\n\r\n        this.props.playerStore.searchTickets(queryParams);\r\n    }\r\n\r\n    onFilterClick = () => {\r\n        this.props.playerStore.filterTicketHistoryResult();\r\n    }\r\n\r\n    handleToastClose = () => {\r\n        this.props.playerStore.setTicketHistoryToast(false);\r\n    }\r\n\r\n    render() {\r\n\r\n        const {ticketHistoryTableHeader, ticketHistoryTableRows, showTicketHistoryToast, successMessage, errorMessage} = this.props.playerStore;\r\n        let Timestamp;\r\n        let rows = ticketHistoryTableRows && ticketHistoryTableRows.map((d, index) => {\r\n            d.idField = index + 1;\r\n            Timestamp = `${d.requestTimestamp}`\r\n            d.date = Timestamp.substring(0, 10)\r\n            d.time = Timestamp.substring(11, 19)\r\n            d.amount = isNaN(`${d.prizeAmount}`) ? `${d.prizeAmount}` : (Number(`${d.prizeAmount}`) / 100).toFixed(2)\r\n            return d;\r\n        });\r\n\r\n        return (\r\n            <div className='player-search-container container-fluid'>\r\n                <div className='player-search-panel player-search-child'>\r\n                    <TicketSearch tableHeader={ticketHistoryTableHeader} userList={rows}\r\n                                  handleSearchClick={this.onSearchClick}\r\n                                  handleFilterClick={this.onFilterClick} {...this.props}/>\r\n                </div>\r\n                {\r\n                    ticketHistoryTableHeader && rows\r\n                        ? <ReactTable tableHeader={ticketHistoryTableHeader} rowData={rows}\r\n                                          className='update-user-table'/>\r\n                        : null\r\n                }\r\n                {/*{showTicketHistoryToast\r\n                    ?\r\n                    <AppToast showToast={showTicketHistoryToast}\r\n                              message={successMessage ? successMessage : errorMessage}\r\n                              isSuccessMessage={successMessage !== null}\r\n                              handleClose={() => this.handleToastClose()}/>\r\n                    : null\r\n                }*/}\r\n            </div>\r\n\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default TicketHistory;\r\n"]},"metadata":{},"sourceType":"module"}