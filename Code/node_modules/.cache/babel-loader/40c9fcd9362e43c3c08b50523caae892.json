{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _dec,_class,_temp;import React from\"react\";import{inject,observer}from\"mobx-react\";import'./ClaimDetails.css';import{toJS}from\"mobx\";import ReactTable from\"../../PaginatedTable/ReactTable\";import{checkRenderPermissions}from\"../../helpers\";import{permissions}from\"../../constants\";import{Button,Modal}from\"react-bootstrap\";import{UserAction,UserActionCategory}from\"../../UserActionCategory\";import AppTextbox from\"../../AppTextbox\";import AppToast from\"../../toast\";import SigContainer from'../../components/sigcontainer/sigcontainer';var ClaimDetails=(_dec=inject('playerStore','claimStore'),_dec(_class=observer(_class=(_temp=/*#__PURE__*/function(_React$Component){_inherits(ClaimDetails,_React$Component);var _super=_createSuper(ClaimDetails);function ClaimDetails(props){var _this;_classCallCheck(this,ClaimDetails);_this=_super.call(this,props);_this.onClose=function(e){//this.props.playerStore.clearESig();\n_this.setState({showSigModal:false});};_this.handleW2GFormButtonClick=function(){_this.props.playerStore.fetchW2GFormForClaim();};_this.handleESigFormButtonClick=function(){//this.props.playerStore.fetchESigFormForClaim();\nif(_this.props.playerStore.eSignatureURL&&_this.props.playerStore.eSignatureURL!=''){_this.props.playerStore.logAction(UserActionCategory.BUTTON_CLICK,UserAction.VIEW_ESIGNAURE,'Claim ID: '+_this.props.playerStore.selectedClaimId,'');_this.setState({showSigModal:true});}else{_this.props.playerStore.logAction(UserActionCategory.BUTTON_CLICK,UserAction.VIEW_ESIGNAURE_FAILED,'Claim ID: '+_this.props.playerStore.selectedClaimId,'No E-Signature Link Provided');_this.setState({showToast:true});}//this.setState({showSigModal: true});\n};_this.handleClaimHistoryDetailClick=function(){// alert('Claim history click')\n};_this.handlePaymentDetailClick=function(paymentData){_this.props.playerStore.logAction(UserActionCategory.API_CALL,UserAction.VIEW_PAYMENT_DETAILS,'Transaction ID: '+paymentData.transactionId,'');_this.props.playerStore.setPaymentDetails(paymentData,_this.navigateToPaymentDetails);};_this.navigateToPaymentDetails=function(){var id=_this.props.playerStore.selectedClaimId;_this.props.history.push(\"/claim/\".concat(id,\"/paymenthistory\"));};_this.handleRepaymentButtonClick=function(){_this.setState({showModal:true});};_this.handleInputChange=function(event,stateName){var value=event.target.value;var re=/^[0-9\\b]+$/;if(value===''||re.test(value)){_this.setState(_defineProperty({},stateName,value));}};_this.handleRoutingInputChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,stateName){var value,bankName,playerStore,re,_this$setState4;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:value=event.target.value;bankName=null;playerStore=_this.props.playerStore;re=/^[0-9\\b]+$/;if(!(value===''||re.test(value))){_context.next=12;break;}if(!(value.length===9)){_context.next=11;break;}playerStore.setSpinnerState(true);_context.next=9;return fetch(\"https://www.routingnumbers.info/api/name.json?rn=\".concat(value),{method:'GET'}).then(function(response){return response.json();}).then(function(res){if(res.code===200){var _this$setState2;bankName=res.name;_this.setState((_this$setState2={},_defineProperty(_this$setState2,stateName,value),_defineProperty(_this$setState2,\"bankName\",bankName),_this$setState2));}else{_this.setState(_defineProperty({},stateName,value));}playerStore.setSpinnerState(false);}).catch(function(error){_this.errorMessage=error.toString();playerStore.setSpinnerState(false);});case 9:_context.next=12;break;case 11:_this.setState((_this$setState4={},_defineProperty(_this$setState4,stateName,value),_defineProperty(_this$setState4,\"bankName\",bankName),_this$setState4));case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleResubmitPayment=function(referenceNumber){var _this$state=_this.state,routingNumber=_this$state.routingNumber,accountNumber=_this$state.accountNumber,selectedAccount=_this$state.selectedAccount;_this.props.claimStore.resubmitACHPayment(referenceNumber,accountNumber,routingNumber,selectedAccount);};_this.onYes=function(referenceNumber){_this.setState({showConfirmModal:false},function(){return _this.handleResubmitPayment(referenceNumber);});};_this.onNo=function(){_this.setState({showConfirmModal:false,showModal:true});};_this.onSubmit=function(){_this.setState({showConfirmModal:true,showModal:false});};_this.onCancel=function(){_this.setState({showModal:false});};_this.onAccountTypeChange=function(event){_this.setState({selectedAccount:event.target.value});};_this.handleToastClose=function(){_this.setState({showToast:false});};_this.state={showModal:false,showConfirmModal:false,showSigModal:false,routingNumber:'',confirmRoutingNumber:'',accountNumber:'',confirmAccountNumber:'',bankName:null,accountTypes:['CHECKING','SAVINGS'],selectedAccount:'CHECKING',showToast:false};return _this;}_createClass(ClaimDetails,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.playerStore.fetchClaimDetails();this.props.playerStore.fetchPaymentHistoryDetails();}},{key:\"renderClaimDetails\",value:function renderClaimDetails(){var _this2=this;if(this.props.playerStore.claimDetails&&this.props.playerStore.selectedClaimId){var _this$state2=this.state,showModal=_this$state2.showModal,showConfirmModal=_this$state2.showConfirmModal,showSigModal=_this$state2.showSigModal,routingNumber=_this$state2.routingNumber,confirmRoutingNumber=_this$state2.confirmRoutingNumber,accountNumber=_this$state2.accountNumber,confirmAccountNumber=_this$state2.confirmAccountNumber,bankName=_this$state2.bankName,accountTypes=_this$state2.accountTypes,selectedAccount=_this$state2.selectedAccount,showToast=_this$state2.showToast;var isSpinnerLoading=this.props.playerStore.isSpinnerLoading;var isSubmitDisabled=true;if(routingNumber&&confirmRoutingNumber&&confirmAccountNumber&&accountNumber&&bankName&&routingNumber.length===9&&confirmAccountNumber===accountNumber&&confirmRoutingNumber===routingNumber){isSubmitDisabled=false;}var data=toJS(this.props.playerStore.claimDetails);var paymentHistoryTableRows=toJS(this.props.playerStore.paymentHistoryData);var selectedClaimDetails=data.selectedClaimDetails,claimHistoryTableHeader=data.claimHistoryTableHeader,claimHistoryTableRows=data.claimHistoryTableRows,eSignatureData=data.eSignatureData;var paymentHistoryTableHeader=[{key:'date',label:'Date'},{key:'time',label:'Time'},{key:'transactionId',label:'Transaction ID'},{key:'amount',label:'Amount',classes:'currency-column'},{key:'status',label:'Status'}];var rejectedCounter=0;if(checkRenderPermissions(permissions.CAN_SEE_CLAIM_TRANSACTION_DETAILS,JSON.parse(localStorage.getItem('userpolicies')))){if(paymentHistoryTableRows&&paymentHistoryTableRows.length>0){paymentHistoryTableHeader.push({key:'view',label:'View Details'});paymentHistoryTableRows.forEach(function(row){if(row.status==='REJECTED'){rejectedCounter++;}row.view=/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this2.handlePaymentDetailClick(row);},className:\"claim-link\"},\"View Details\");});}}var referenceNumber=selectedClaimDetails.referenceNumber,serialNumber=selectedClaimDetails.serialNumber,barcode=selectedClaimDetails.barcode,ticketSerialNumber=selectedClaimDetails.ticketSerialNumber,ticketBarcode=selectedClaimDetails.ticketBarcode,prizeAmountInCents=selectedClaimDetails.prizeAmountInCents,taxWithholding=selectedClaimDetails.taxWithholding,offsetWithholding=selectedClaimDetails.offsetWithholding,status=selectedClaimDetails.status,netPaymentAmountInCents=selectedClaimDetails.netPaymentAmountInCents,rejectedCount=selectedClaimDetails.rejectedCount;var canSeeESig=checkRenderPermissions(permissions.CAN_SEE_E_SIGNATURE,JSON.parse(localStorage.getItem('userpolicies')));var canSeeW2G=checkRenderPermissions(permissions.CAN_SEE_CLAIM_W2G,JSON.parse(localStorage.getItem('userpolicies')));var isResubmitDisabled=checkRenderPermissions(permissions.CAN_RESUBMIT_PAYMENT,JSON.parse(localStorage.getItem('userpolicies')));// claimHistoryTableRows.forEach(row => row.view = <a onClick={() => this.handleClaimHistoryDetailClick()} className='claim-link'>View Details</a>);\nvar isButtonEnabled=!(status==='READY_FOR_PAYMENT'&&rejectedCounter===1);return/*#__PURE__*/React.createElement(\"div\",{className:\"claim-container container-fluid\"},showToast?/*#__PURE__*/React.createElement(AppToast,{showToast:showToast,message:'No Signature found for Claim',isSuccessMessage:false,handleClose:null}):null,/*#__PURE__*/React.createElement(\"div\",{className:\"claim-panel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Reference #\"),/*#__PURE__*/React.createElement(\"div\",null,referenceNumber)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column big-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Ticket Serial #\"),/*#__PURE__*/React.createElement(\"div\",null,serialNumber)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column big-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Ticket Barcode\"),/*#__PURE__*/React.createElement(\"div\",null,barcode)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Prize Amount\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",prizeAmountInCents?(prizeAmountInCents/100).toFixed(2):0)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Tax Withholding\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",taxWithholding)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Offset Withholding\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",offsetWithholding)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Net Amount\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",netPaymentAmountInCents&&netPaymentAmountInCents/100)),/*#__PURE__*/React.createElement(\"div\",{className:\"claim-top-column\"},/*#__PURE__*/React.createElement(\"div\",null,\"Status\"),/*#__PURE__*/React.createElement(\"div\",null,status)))),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",show:showSigModal,className:\"\".concat(\"\",\" role-modal\")},/*#__PURE__*/React.createElement(Modal.Header,null,/*#__PURE__*/React.createElement(\"h5\",null,'E-Signature')),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(SigContainer,null)),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this2.onClose(e);}},\"Close\"))),claimHistoryTableHeader&&claimHistoryTableRows?/*#__PURE__*/React.createElement(ReactTable,{tableHeader:claimHistoryTableHeader,rowData:claimHistoryTableRows,className:\"claim-panel\",header:\"Claim History\"}):null,paymentHistoryTableHeader&&paymentHistoryTableRows?/*#__PURE__*/React.createElement(ReactTable,{tableHeader:paymentHistoryTableHeader,rowData:paymentHistoryTableRows,className:\"claim-panel\",header:\"Payment History\"}):null,canSeeESig?/*#__PURE__*/React.createElement(Button,{className:\"view-sig-button\",onClick:function onClick(){return _this2.handleESigFormButtonClick();}},\"View E-Signature\"):null,canSeeW2G?/*#__PURE__*/React.createElement(Button,{className:\"view-pdf-button\",onClick:function onClick(){return _this2.handleW2GFormButtonClick();}},\"View W2G\"):null,isResubmitDisabled?/*#__PURE__*/React.createElement(Button,{disabled:isButtonEnabled,className:\"resubmit-button\",onClick:function onClick(){return _this2.handleRepaymentButtonClick();}},\"Resubmit Payment\"):null,/*#__PURE__*/React.createElement(Modal,{show:showModal,centered:true},/*#__PURE__*/React.createElement(Modal.Header,null,\"Resubmit Payment\"),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"formGroupRoleName\",placeholder:\"Routing Number\",value:routingNumber,disabled:isSpinnerLoading,maxlength:9,onChange:function onChange(e){return _this2.handleRoutingInputChange(e,'routingNumber');}}),routingNumber&&bankName===null?/*#__PURE__*/React.createElement(\"div\",{className:\"warning-message\"},\"Does Not Match Known Banks\"):null,bankName?/*#__PURE__*/React.createElement(\"div\",{className:\"bank-name\"},bankName):null,/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"formGroupRoleName\",placeholder:\"Re-Enter Routing Number\",value:confirmRoutingNumber,disabled:isSpinnerLoading,maxlength:9,onChange:function onChange(e){return _this2.handleInputChange(e,'confirmRoutingNumber');}}),routingNumber&&confirmRoutingNumber&&routingNumber!==confirmRoutingNumber?/*#__PURE__*/React.createElement(\"div\",{className:\"warning-message\"},\"Routing Numbers Do Not Match\"):null,/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"formGroupRoleName\",placeholder:\"Account Number\",value:accountNumber,disabled:isSpinnerLoading,onChange:function onChange(e){return _this2.handleInputChange(e,'accountNumber');}}),/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"formGroupRoleName\",placeholder:\"Re-Enter Account Number\",value:confirmAccountNumber,disabled:isSpinnerLoading,onChange:function onChange(e){return _this2.handleInputChange(e,'confirmAccountNumber');}}),accountNumber&&confirmAccountNumber&&accountNumber!==confirmAccountNumber?/*#__PURE__*/React.createElement(\"div\",{className:\"warning-message\"},\"Account Numbers Do Not Match\"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"account-type-label\"},\"Account Type\"),/*#__PURE__*/React.createElement(\"select\",{className:\"form-control account-select\",value:selectedAccount,onChange:this.onAccountTypeChange},accountTypes.map(function(account){return/*#__PURE__*/React.createElement(\"option\",{value:account},account);})))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this2.onCancel(e);}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",disabled:isSubmitDisabled,onClick:function onClick(e){return _this2.onSubmit(e);}},\"Submit\"))),/*#__PURE__*/React.createElement(Modal,{show:showConfirmModal,centered:true},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"player-details-label\"},\"Are you sure you wish to submit this Payment?\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this2.onNo(e);}},\"No\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){return _this2.onYes(referenceNumber);}},\"Yes\"))));}return/*#__PURE__*/React.createElement(\"div\",{className:\"claim-container container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"no-data-message\"},\"Error loading data...go back\"));}},{key:\"render\",value:function render(){var renderObj;if(checkRenderPermissions(permissions.CAN_SEE_CLAIMS,JSON.parse(localStorage.getItem('userpolicies')))&&checkRenderPermissions(permissions.CAN_SEE_CLAIM_DETAILS,JSON.parse(localStorage.getItem('userpolicies')))){renderObj=this.renderClaimDetails();}else{renderObj=/*#__PURE__*/React.createElement(\"h1\",{class:\"unauthorized-header\"},\"You do not have permission to view this page! Please contact your System Administrator!\");}return renderObj;}}]);return ClaimDetails;}(React.Component),_temp))||_class)||_class);export default ClaimDetails;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/ReactExampleCode/test-typescript-compile-within-a-javascript-project/Code/src/Claims/claimDetails/ClaimDetails.js"],"names":["React","inject","observer","toJS","ReactTable","checkRenderPermissions","permissions","Button","Modal","UserAction","UserActionCategory","AppTextbox","AppToast","SigContainer","ClaimDetails","props","onClose","e","setState","showSigModal","handleW2GFormButtonClick","playerStore","fetchW2GFormForClaim","handleESigFormButtonClick","eSignatureURL","logAction","BUTTON_CLICK","VIEW_ESIGNAURE","selectedClaimId","VIEW_ESIGNAURE_FAILED","showToast","handleClaimHistoryDetailClick","handlePaymentDetailClick","paymentData","API_CALL","VIEW_PAYMENT_DETAILS","transactionId","setPaymentDetails","navigateToPaymentDetails","id","history","push","handleRepaymentButtonClick","showModal","handleInputChange","event","stateName","value","target","re","test","handleRoutingInputChange","bankName","length","setSpinnerState","fetch","method","then","response","json","res","code","name","catch","error","errorMessage","toString","handleResubmitPayment","referenceNumber","state","routingNumber","accountNumber","selectedAccount","claimStore","resubmitACHPayment","onYes","showConfirmModal","onNo","onSubmit","onCancel","onAccountTypeChange","handleToastClose","confirmRoutingNumber","confirmAccountNumber","accountTypes","fetchClaimDetails","fetchPaymentHistoryDetails","claimDetails","isSpinnerLoading","isSubmitDisabled","data","paymentHistoryTableRows","paymentHistoryData","selectedClaimDetails","claimHistoryTableHeader","claimHistoryTableRows","eSignatureData","paymentHistoryTableHeader","key","label","classes","rejectedCounter","CAN_SEE_CLAIM_TRANSACTION_DETAILS","JSON","parse","localStorage","getItem","forEach","row","status","view","serialNumber","barcode","ticketSerialNumber","ticketBarcode","prizeAmountInCents","taxWithholding","offsetWithholding","netPaymentAmountInCents","rejectedCount","canSeeESig","CAN_SEE_E_SIGNATURE","canSeeW2G","CAN_SEE_CLAIM_W2G","isResubmitDisabled","CAN_RESUBMIT_PAYMENT","isButtonEnabled","toFixed","map","account","renderObj","CAN_SEE_CLAIMS","CAN_SEE_CLAIM_DETAILS","renderClaimDetails","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport './ClaimDetails.css';\r\nimport {toJS} from \"mobx\";\r\nimport ReactTable from \"../../PaginatedTable/ReactTable\";\r\nimport {checkRenderPermissions} from \"../../helpers\";\r\nimport {permissions} from \"../../constants\";\r\nimport {Button, Modal} from \"react-bootstrap\";\r\nimport {UserAction, UserActionCategory} from \"../../UserActionCategory\";\r\nimport AppTextbox from \"../../AppTextbox\";\r\nimport AppToast from \"../../toast\";\r\nimport SigContainer from '../../components/sigcontainer/sigcontainer';\r\n\r\n@inject('playerStore', 'claimStore')\r\n@observer\r\nclass ClaimDetails extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal: false,\r\n            showConfirmModal: false,\r\n            showSigModal: false,\r\n            routingNumber: '',\r\n            confirmRoutingNumber: '',\r\n            accountNumber: '',\r\n            confirmAccountNumber: '',\r\n            bankName: null,\r\n            accountTypes: ['CHECKING', 'SAVINGS'],\r\n            selectedAccount: 'CHECKING',\r\n            showToast: false\r\n        };\r\n    }\r\n\r\n    onClose = (e) => {\r\n        //this.props.playerStore.clearESig();\r\n        this.setState({showSigModal: false});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.playerStore.fetchClaimDetails();\r\n        this.props.playerStore.fetchPaymentHistoryDetails();\r\n    }\r\n\r\n    handleW2GFormButtonClick = () => {\r\n        this.props.playerStore.fetchW2GFormForClaim();\r\n    }\r\n\r\n    handleESigFormButtonClick = () => {\r\n        //this.props.playerStore.fetchESigFormForClaim();\r\n\r\n        if(this.props.playerStore.eSignatureURL && this.props.playerStore.eSignatureURL != ''){\r\n            this.props.playerStore.logAction(UserActionCategory.BUTTON_CLICK, UserAction.VIEW_ESIGNAURE, 'Claim ID: '+this.props.playerStore.selectedClaimId, '');\r\n            this.setState({showSigModal: true})\r\n        } else {\r\n            this.props.playerStore.logAction(UserActionCategory.BUTTON_CLICK, UserAction.VIEW_ESIGNAURE_FAILED, 'Claim ID: '+this.props.playerStore.selectedClaimId, 'No E-Signature Link Provided');\r\n            this.setState({showToast: true})\r\n        }\r\n        //this.setState({showSigModal: true});\r\n    }\r\n\r\n    handleClaimHistoryDetailClick = () => {\r\n        // alert('Claim history click')\r\n    }\r\n\r\n    handlePaymentDetailClick = (paymentData) => {\r\n        this.props.playerStore.logAction(UserActionCategory.API_CALL, UserAction.VIEW_PAYMENT_DETAILS, 'Transaction ID: '+paymentData.transactionId, '');\r\n        this.props.playerStore.setPaymentDetails(paymentData, this.navigateToPaymentDetails);\r\n    }\r\n\r\n    navigateToPaymentDetails = () => {\r\n        const id  = this.props.playerStore.selectedClaimId;\r\n        this.props.history.push(`/claim/${id}/paymenthistory`);\r\n    }\r\n\r\n    handleRepaymentButtonClick = () => {\r\n        this.setState({showModal: true});\r\n    }\r\n\r\n    handleInputChange = (event, stateName) => {\r\n        const {value} = event.target;\r\n        const re = /^[0-9\\b]+$/;\r\n        if (value === '' || re.test(value)) {\r\n            this.setState({[stateName]: value});\r\n        }\r\n    }\r\n\r\n    handleRoutingInputChange = async (event, stateName) => {\r\n        const {value} = event.target;\r\n        let bankName = null;\r\n        const {playerStore} = this.props;\r\n        const re = /^[0-9\\b]+$/;\r\n        if (value === '' || re.test(value)) {\r\n            if(value.length === 9) {\r\n                playerStore.setSpinnerState(true);\r\n                await fetch(`https://www.routingnumbers.info/api/name.json?rn=${value}`, {\r\n                    method: 'GET',\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(res => {\r\n                        if(res.code === 200) {\r\n                            bankName = res.name;\r\n                            this.setState({[stateName]: value, bankName});\r\n                        } else {\r\n                            this.setState({[stateName]: value});\r\n                        }\r\n                        playerStore.setSpinnerState(false);\r\n                    })\r\n                    .catch((error) => {\r\n                        this.errorMessage = error.toString();\r\n                        playerStore.setSpinnerState(false);\r\n                    });\r\n            } else {\r\n                this.setState({[stateName]: value, bankName});\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    handleResubmitPayment = (referenceNumber) => {\r\n        const {routingNumber, accountNumber, selectedAccount} = this.state;\r\n        this.props.claimStore.resubmitACHPayment(referenceNumber, accountNumber, routingNumber, selectedAccount);\r\n    }\r\n    onYes = (referenceNumber) => {\r\n        this.setState({showConfirmModal: false}, () => this.handleResubmitPayment(referenceNumber));\r\n    }\r\n    onNo = () => {\r\n        this.setState({showConfirmModal: false, showModal:true});\r\n    }\r\n    onSubmit = () => {\r\n        this.setState({showConfirmModal: true, showModal: false});\r\n    }\r\n    onCancel = () => {\r\n        this.setState({showModal: false});\r\n    }\r\n\r\n    onAccountTypeChange = event => {\r\n        this.setState({selectedAccount: event.target.value});\r\n    }\r\n\r\n    handleToastClose = () => {\r\n        this.setState({showToast: false});\r\n    }\r\n\r\n\r\n    renderClaimDetails() {\r\n        if(this.props.playerStore.claimDetails && this.props.playerStore.selectedClaimId) {\r\n\r\n            const {showModal, showConfirmModal, showSigModal, routingNumber, confirmRoutingNumber, accountNumber,\r\n                confirmAccountNumber, bankName, accountTypes, selectedAccount, showToast} = this.state;\r\n            const {isSpinnerLoading} = this.props.playerStore;\r\n            let isSubmitDisabled = true;\r\n            \r\n            if(routingNumber && confirmRoutingNumber && confirmAccountNumber && accountNumber && bankName &&\r\n                routingNumber.length === 9 && confirmAccountNumber === accountNumber &&\r\n                confirmRoutingNumber === routingNumber) {\r\n                isSubmitDisabled = false;\r\n            }\r\n            \r\n\r\n            const data = toJS(this.props.playerStore.claimDetails)\r\n            const paymentHistoryTableRows = toJS(this.props.playerStore.paymentHistoryData);\r\n            const {selectedClaimDetails, claimHistoryTableHeader, claimHistoryTableRows, eSignatureData} = data;\r\n            const paymentHistoryTableHeader =  [\r\n                {key: 'date', label: 'Date'},\r\n                {key: 'time', label: 'Time'},\r\n                {key: 'transactionId', label: 'Transaction ID'},\r\n                {key: 'amount', label: 'Amount', classes: 'currency-column'},\r\n                {key: 'status', label: 'Status'},\r\n            ];\r\n            let rejectedCounter = 0;\r\n            if(checkRenderPermissions(permissions.CAN_SEE_CLAIM_TRANSACTION_DETAILS, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n                if(paymentHistoryTableRows && paymentHistoryTableRows.length > 0) {\r\n                    paymentHistoryTableHeader.push({key: 'view', label: 'View Details'});\r\n                    paymentHistoryTableRows.forEach(row => {\r\n                        if(row.status === 'REJECTED') {\r\n                            rejectedCounter++;\r\n                        }\r\n                        row.view = <a onClick={() => this.handlePaymentDetailClick(row)} className='claim-link'>View Details</a>\r\n                    });\r\n                }\r\n            }\r\n\r\n\r\n            const {referenceNumber, serialNumber, barcode, ticketSerialNumber, ticketBarcode, prizeAmountInCents, taxWithholding,\r\n                offsetWithholding, status, netPaymentAmountInCents, rejectedCount} = selectedClaimDetails;\r\n            const canSeeESig = checkRenderPermissions(permissions.CAN_SEE_E_SIGNATURE,\r\n                JSON.parse(localStorage.getItem('userpolicies')));\r\n            const canSeeW2G = checkRenderPermissions(permissions.CAN_SEE_CLAIM_W2G,\r\n                JSON.parse(localStorage.getItem('userpolicies')));\r\n\r\n            const isResubmitDisabled = checkRenderPermissions(permissions.CAN_RESUBMIT_PAYMENT,\r\n                JSON.parse(localStorage.getItem('userpolicies')));\r\n\r\n            // claimHistoryTableRows.forEach(row => row.view = <a onClick={() => this.handleClaimHistoryDetailClick()} className='claim-link'>View Details</a>);\r\n\r\n            const isButtonEnabled = !(status === 'READY_FOR_PAYMENT' && rejectedCounter === 1);\r\n            return(\r\n                <div className='claim-container container-fluid'>\r\n                    {showToast\r\n                    ?\r\n                    <AppToast showToast={showToast}\r\n                              message={'No Signature found for Claim'}\r\n                              isSuccessMessage={false}\r\n                              handleClose={null}/>\r\n                    : null\r\n                }\r\n                    <div className='claim-panel'>\r\n                        <div className='claim-top-row'>\r\n                            <div className='claim-top-column'>\r\n                                <div>\r\n                                    Reference #\r\n                                </div>\r\n                                <div>\r\n                                    {referenceNumber}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column big-column'>\r\n                                <div>\r\n                                    Ticket Serial #\r\n                                </div>\r\n                                <div>\r\n                                    {serialNumber}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column big-column'>\r\n                                <div>\r\n                                    Ticket Barcode\r\n                                </div>\r\n                                <div>\r\n                                    {barcode}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column'>\r\n                                <div>\r\n                                    Prize Amount\r\n                                </div>\r\n                                <div>\r\n                                    ${prizeAmountInCents ?  (prizeAmountInCents/100).toFixed(2) : 0}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column'>\r\n                                <div>\r\n                                    Tax Withholding\r\n                                </div>\r\n                                <div>\r\n                                    ${taxWithholding}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column'>\r\n                                <div>\r\n                                    Offset Withholding\r\n                                </div>\r\n                                <div>\r\n                                    ${offsetWithholding}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column'>\r\n                                <div>\r\n                                    Net Amount\r\n                                </div>\r\n                                <div>\r\n                                    ${netPaymentAmountInCents && netPaymentAmountInCents/100}\r\n                                </div>\r\n                            </div>\r\n                            <div className='claim-top-column'>\r\n                                <div>\r\n                                    Status\r\n                                </div>\r\n                                <div>\r\n                                    {status}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Modal size='lg' show={showSigModal} className={`${``} role-modal`}>\r\n                        <Modal.Header>\r\n                            <h5>{'E-Signature'}</h5>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <SigContainer/>\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            <Button variant='secondary' onClick={(e) => this.onClose(e)}>Close</Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n\r\n                    {\r\n                        claimHistoryTableHeader && claimHistoryTableRows\r\n                            ? <ReactTable tableHeader={claimHistoryTableHeader} rowData={claimHistoryTableRows}\r\n                                          className='claim-panel' header='Claim History'/>\r\n                            : null\r\n                    }\r\n                    {\r\n                        paymentHistoryTableHeader && paymentHistoryTableRows\r\n                            ? <ReactTable tableHeader={paymentHistoryTableHeader} rowData={paymentHistoryTableRows}\r\n                                          className='claim-panel' header='Payment History'/>\r\n                            : null\r\n                    }\r\n                    {\r\n                        canSeeESig\r\n                            ? <Button className='view-sig-button' onClick={() => this.handleESigFormButtonClick()}>\r\n                                View E-Signature\r\n                            </Button>\r\n                            : null\r\n                    }\r\n                    {\r\n                        canSeeW2G\r\n                            ? <Button className='view-pdf-button' onClick={() => this.handleW2GFormButtonClick()}>\r\n                                View W2G\r\n                            </Button>\r\n                            : null\r\n                    }\r\n                    {\r\n                        isResubmitDisabled\r\n                            ? <Button\r\n                                disabled={isButtonEnabled}\r\n                                className='resubmit-button'\r\n                                onClick={() => this.handleRepaymentButtonClick()}>\r\n                                Resubmit Payment\r\n                            </Button>\r\n                            : null\r\n                    }\r\n\r\n                    <Modal show={showModal} centered={true}>\r\n                        <Modal.Header>\r\n                            Resubmit Payment\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <div>\r\n                                <AppTextbox controlId='formGroupRoleName'\r\n                                            placeholder='Routing Number'\r\n                                            value={routingNumber}\r\n                                            disabled={isSpinnerLoading}\r\n                                            maxlength={9}\r\n                                            onChange={(e) => this.handleRoutingInputChange(e, 'routingNumber')}\r\n                                />\r\n                                {\r\n                                    routingNumber && bankName === null\r\n                                        ? <div className='warning-message'>Does Not Match Known Banks</div>\r\n                                        : null\r\n                                }\r\n                                {\r\n                                    bankName ? <div className='bank-name'>{bankName}</div> : null\r\n                                }\r\n                                <AppTextbox controlId='formGroupRoleName'\r\n                                            placeholder='Re-Enter Routing Number'\r\n                                            value={confirmRoutingNumber}\r\n                                            disabled={isSpinnerLoading}\r\n                                            maxlength={9}\r\n                                            onChange={(e) => this.handleInputChange(e, 'confirmRoutingNumber')}\r\n                                />\r\n                                {\r\n                                    routingNumber && confirmRoutingNumber && routingNumber !== confirmRoutingNumber\r\n                                        ? <div className='warning-message'>Routing Numbers Do Not Match</div>\r\n                                        : null\r\n                                }\r\n                                <AppTextbox controlId='formGroupRoleName'\r\n                                            placeholder='Account Number'\r\n                                            value={accountNumber}\r\n                                            disabled={isSpinnerLoading}\r\n                                            onChange={(e) => this.handleInputChange(e, 'accountNumber')}\r\n                                />\r\n                                <AppTextbox controlId='formGroupRoleName'\r\n                                            placeholder='Re-Enter Account Number'\r\n                                            value={confirmAccountNumber}\r\n                                            disabled={isSpinnerLoading}\r\n                                            onChange={(e) => this.handleInputChange(e, 'confirmAccountNumber')}\r\n                                />\r\n                                {\r\n                                    accountNumber && confirmAccountNumber && accountNumber !== confirmAccountNumber\r\n                                        ? <div className='warning-message'>Account Numbers Do Not Match</div>\r\n                                        : null\r\n                                }\r\n                                <div className='account-type-label'>Account Type</div>\r\n                                <select className='form-control account-select' value={selectedAccount} onChange={this.onAccountTypeChange}>\r\n                                    {\r\n                                        accountTypes.map(account => {\r\n                                            return <option value={account}>{account}</option>\r\n                                        })\r\n                                    }\r\n                                </select>\r\n\r\n                            </div>\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            <Button variant='secondary' onClick={(e) => this.onCancel(e)}>\r\n                                Cancel\r\n                            </Button>\r\n                            <Button variant='primary' disabled={isSubmitDisabled}\r\n                                    onClick={(e) => this.onSubmit(e)}>\r\n                                Submit\r\n                            </Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n                    <Modal show={showConfirmModal} centered={true}>\r\n                        <Modal.Body>\r\n                            <div className='player-details-label'>\r\n                                Are you sure you wish to submit this Payment?\r\n                            </div>\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            <Button variant='secondary' onClick={(e) => this.onNo(e)}>No</Button>\r\n                            <Button variant='primary' onClick={() => this.onYes(referenceNumber)}>Yes</Button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n                </div>\r\n            )\r\n        }\r\n        return(\r\n            <div className='claim-container container-fluid'>\r\n                <div className='no-data-message'>Error loading data...go back</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n\r\n        let renderObj;\r\n\r\n        if (checkRenderPermissions(permissions.CAN_SEE_CLAIMS, JSON.parse(localStorage.getItem('userpolicies')))\r\n            && checkRenderPermissions(permissions.CAN_SEE_CLAIM_DETAILS, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            renderObj = this.renderClaimDetails();\r\n        } else {\r\n            renderObj =\r\n                <h1 class='unauthorized-header'>You do not have permission to view this page! Please contact your System\r\n                    Administrator!</h1>\r\n        }\r\n\r\n        return (\r\n            renderObj\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ClaimDetails;"]},"metadata":{},"sourceType":"module"}