{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Button}from\"react-bootstrap\";import\"react-datepicker/dist/react-datepicker.css\";import{Line}from'react-chartjs-2';import SystemSearch from'../systemsearch';import ReactTable from\"../PaginatedTable/ReactTable\";import AppToast from\"../toast\";import config from\"../config\";import moment from\"moment\";import{ExportToCsv}from'export-to-csv';import'./SystemDetails.css';var SystemDetails=/*#__PURE__*/function(_React$Component){_inherits(SystemDetails,_React$Component);var _super=_createSuper(SystemDetails);function SystemDetails(props){var _this;_classCallCheck(this,SystemDetails);_this=_super.call(this,props);_this.setSystemDetails=function(res){var data=res.hits.hits;_this.setState({'category':data[0]._source.category,'datetime':data[0]._source.eventDateTime,'sourceFile':data[0]._source.fileName,'description':data[0]._source.eventDescription,'logLine':data[0]._source.eventResult,'logContext':data[0]._source.context});};_this.state={category:'',datetime:'',sourceFile:'',description:'',logLine:'',logContext:'',showError:false,showToast:false};return _this;}_createClass(SystemDetails,[{key:\"fetchSystemDetails\",value:function fetchSystemDetails(){var _this2=this;var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(id==''){console.log('no query string passed');}else{var queryStr=\"?id=\".concat(id);var url=\"\".concat(config.LOG_SERVER_BASE_URL,\"/v1/log/eventbyid\").concat(queryStr);fetch(url,{method:'GET',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(res){if(res.error){console.log(res.error);}else{_this2.setSystemDetails(res);}}).catch(function(error){_this2.setState({showError:true,errorMessage:error.toString()});});}}},{key:\"componentDidMount\",value:function componentDidMount(){var data=null;if(this.props.location.state==undefined){this.props.history.push('/system/dashboard');}else{var id=this.props.location.state.detail;this.fetchSystemDetails(id);}}},{key:\"downloadClicked\",value:function downloadClicked(data){this.csvExporter.generateCsv(data);}},{key:\"render\",value:function render(){var _this$state=this.state,category=_this$state.category,datetime=_this$state.datetime,sourceFile=_this$state.sourceFile,description=_this$state.description,logLine=_this$state.logLine,logContext=_this$state.logContext;return/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-panel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-rows\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"system-details-header\"},\"Category:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"system-details-text\"},category)),/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-rows\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"system-details-header\"},\"Local Time:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"system-details-text\"},datetime)),/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-rows\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"system-details-header\"},\"Source File:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"system-details-text\"},sourceFile)),/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-rows\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"system-details-header\"},\"Description:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"system-details-text\"},description)),/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-rows\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"system-details-header\"},\"Log Line:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"system-details-text\"},logLine)),/*#__PURE__*/React.createElement(\"div\",{className:\"system-details-rows\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"system-details-header\"},\"Log Context:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"system-details-text\"},logContext)));}}]);return SystemDetails;}(React.Component);export default SystemDetails;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/Capstone/lottery/mslc-backoffice-client/v1/Code/src/systemdetails/SystemDetails.js"],"names":["React","Button","Line","SystemSearch","ReactTable","AppToast","config","moment","ExportToCsv","SystemDetails","props","setSystemDetails","res","data","hits","setState","_source","category","eventDateTime","fileName","eventDescription","eventResult","context","state","datetime","sourceFile","description","logLine","logContext","showError","showToast","id","console","log","queryStr","url","LOG_SERVER_BASE_URL","fetch","method","headers","localStorage","getItem","then","response","json","error","catch","errorMessage","toString","location","undefined","history","push","detail","fetchSystemDetails","csvExporter","generateCsv","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport {Line} from 'react-chartjs-2';\r\nimport SystemSearch from '../systemsearch';\r\nimport ReactTable from \"../PaginatedTable/ReactTable\";\r\nimport AppToast from \"../toast\";\r\nimport config from \"../config\";\r\nimport moment from \"moment\";\r\nimport {ExportToCsv} from 'export-to-csv';\r\n\r\nimport './SystemDetails.css';\r\n\r\nclass SystemDetails extends React.Component {  \r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            category: '',\r\n            datetime: '',\r\n            sourceFile: '',\r\n            description: '',\r\n            logLine: '',\r\n            logContext: '',\r\n            showError: false,\r\n            showToast: false\r\n        };\r\n    }\r\n\r\n    fetchSystemDetails(id = ''){\r\n        if(id == ''){\r\n            console.log('no query string passed');\r\n        } else {\r\n            var queryStr = `?id=${id}`;\r\n\r\n            let url = `${config.LOG_SERVER_BASE_URL}/v1/log/eventbyid${queryStr}`;\r\n            fetch(url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                    'Content-Type': 'application/json',\r\n                }\r\n                })\r\n                .then(response => response.json())\r\n                .then(res => {\r\n                    if (res.error) {\r\n                        console.log(res.error);\r\n                    } else {\r\n                        this.setSystemDetails(res);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({showError: true, errorMessage: error.toString()})\r\n                });\r\n        }\r\n    }\r\n\r\n    setSystemDetails = (res) => {\r\n        var data = res.hits.hits;\r\n\r\n        this.setState({\r\n            'category': data[0]._source.category,\r\n            'datetime': data[0]._source.eventDateTime,\r\n            'sourceFile': data[0]._source.fileName,\r\n            'description': data[0]._source.eventDescription,\r\n            'logLine': data[0]._source.eventResult,\r\n            'logContext': data[0]._source.context,\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        var data = null;\r\n\r\n        if (this.props.location.state == undefined){\r\n            this.props.history.push('/system/dashboard');\r\n        }\r\n        else\r\n        {\r\n            var id = this.props.location.state.detail;\r\n            this.fetchSystemDetails(id);\r\n        }\r\n    }\r\n\r\n    downloadClicked(data) {\r\n        this.csvExporter.generateCsv(data);\r\n    }\r\n\r\n    render() {\r\n        const {category, datetime, sourceFile, description, logLine, logContext} = this.state;        \r\n\r\n        return(\r\n            <div className='system-details-panel'>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Category:</h4>\r\n                    <p className='system-details-text'>{category}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Local Time:</h4>\r\n                    <p className='system-details-text'>{datetime}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Source File:</h4>\r\n                    <p className='system-details-text'>{sourceFile}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Description:</h4>\r\n                    <p className='system-details-text'>{description}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Log Line:</h4>\r\n                    <p className='system-details-text'>{logLine}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Log Context:</h4>\r\n                    <p className='system-details-text'>{logContext}</p>\r\n                </div>\r\n            </div>\r\n        ) \r\n    }\r\n}\r\n\r\nexport default SystemDetails;"]},"metadata":{},"sourceType":"module"}