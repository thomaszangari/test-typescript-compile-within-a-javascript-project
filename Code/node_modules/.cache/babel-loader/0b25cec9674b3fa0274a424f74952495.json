{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\ReactExampleCode\\\\test-typescript-compile-within-a-javascript-project\\\\Code\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";var _dec,_class,_temp;import React from'react';import{Button,Modal}from\"react-bootstrap\";import\"./MFAPolicy.css\";import AppTextbox from\"../../AppTextbox\";import{inject,observer}from\"mobx-react\";import AppToast from\"../../toast\";import{checkRenderPermissions}from\"../../helpers\";import{permissions}from\"../../constants\";var MFAPolicy=(_dec=inject('settingsStore'),_dec(_class=observer(_class=(_temp=/*#__PURE__*/function(_React$Component){_inherits(MFAPolicy,_React$Component);var _super=_createSuper(MFAPolicy);function MFAPolicy(props){var _this;_classCallCheck(this,MFAPolicy);_this=_super.call(this,props);_this.handleToastClose=function(){_this.props.settingsStore.setToast(false);_this.props.history.goBack();};_this.deleteRule=function(id){_this.props.settingsStore.deleteMFABypassRule(id);_this.setState({isFieldsEdited:true},function(){return _this.callbackToParent();});};_this.addRule=function(){_this.props.settingsStore.addMFABypassRule('Test1','Descr1');_this.setState({isFieldsEdited:true},function(){return _this.callbackToParent();});};_this.callbackToParent=function(){var isFieldsEdited=_this.state.isFieldsEdited;var flag=isFieldsEdited;_this.props.onUpdate(flag);};_this.handleInputChange=function(e,stateName,id){e.preventDefault();var inboundRules=_this.props.settingsStore.inboundRules;var inboundRule=inboundRules.find(function(rule){return rule.id===id;});if(stateName==='ip'){if(inboundRule){inboundRule.ip=e.target.value;}}else if(stateName==='description'){if(inboundRule){inboundRule.description=e.target.value;}}_this.props.settingsStore.setMFABypassRules(inboundRules);_this.setState({isFieldsEdited:true},function(){return _this.callbackToParent();});};_this.handleSelectChange=function(e,stateName,id){e.preventDefault();var inboundRules=_this.props.settingsStore.inboundRules;var inboundRule=inboundRules.find(function(rule){return rule.id===id;});if(stateName==='source'){if(inboundRule){inboundRule.source=e.target.value;if(e.target.value==='My IP'){inboundRule.ip=_this.props.settingsStore.getMyIPAddress();}}}_this.props.settingsStore.setMFABypassRules(inboundRules);_this.setState({isFieldsEdited:true},function(){return _this.callbackToParent();});};_this.onYes=function(){_this.props.settingsStore.saveMFABypassRules();};_this.handleSubmit=function(){_this.props.settingsStore.setShowConfirmSaveModal(true);};_this.onSubmitCancel=function(){_this.props.settingsStore.setShowConfirmSaveModal(false);};_this.onRejectCancel=function(){_this.setState({showCancelPopup:false},function(){return _this.props.handlePopup(false);});};_this.onCancel=function(e){e.preventDefault();_this.props.settingsStore.discardMFABypassRuleChanges();_this.props.history.goBack();};_this.handleCancel=function(){if(_this.state.isFieldsEdited)_this.setState({showCancelPopup:true});else _this.props.history.goBack();};_this.isIPAddressValid=function(IPAddress){var blocks=IPAddress.split(\".\");if(blocks.length===4&&blocks[3]!==''){for(var i=0;i<blocks.length;i++){if(Number(blocks[i])<0||Number(blocks[i])>255){return false;}}}else{return false;}return true;};_this.isDescriptionValid=function(description){return description&&description.trim().length>0;};_this.state={sources:['Custom','My IP'],isFieldsEdited:false,showCancelPopup:false};return _this;}_createClass(MFAPolicy,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.settingsStore.getMFABypassRules();}},{key:\"renderMFAPolicy\",value:function renderMFAPolicy(){var _this2=this;var _this$state=this.state,sources=_this$state.sources,showCancelPopup=_this$state.showCancelPopup;var showBackConfirm=this.props.showBackConfirm;var _this$props$settingsS=this.props.settingsStore,inboundRules=_this$props$settingsS.inboundRules,showConfirmSaveModal=_this$props$settingsS.showConfirmSaveModal,showToast=_this$props$settingsS.showToast,successMessage=_this$props$settingsS.successMessage,errorMessage=_this$props$settingsS.errorMessage;// Disable [Save Rules] if needed\nvar isDisabled=true;var rule;var _iterator=_createForOfIteratorHelper(inboundRules),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){rule=_step.value;isDisabled=!this.isIPAddressValid(rule.ip)||!this.isDescriptionValid(rule.description);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return/*#__PURE__*/React.createElement(\"div\",{className:\"player-details-container container-fluid \"},showToast?/*#__PURE__*/React.createElement(AppToast,{showToast:showToast,message:successMessage?successMessage:errorMessage,isSuccessMessage:successMessage!==null,handleClose:function handleClose(){return _this2.handleToastClose();}}):null,/*#__PURE__*/React.createElement(Modal,{show:showCancelPopup||showBackConfirm,centered:true},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"player-details-label\"},\"Are you sure you would like to cancel? All unsaved changes will be lost.\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this2.onRejectCancel(e);}},\"No\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return _this2.onCancel(e);}},\"Yes\"))),/*#__PURE__*/React.createElement(Modal,{show:showConfirmSaveModal,centered:true},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{className:\"player-details-label\"},\"Are you sure you would like to Save?\")),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"secondary\",onClick:function onClick(e){return _this2.onSubmitCancel(e);}},\"No\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){return _this2.onYes();}},\"Yes\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"player-details-panel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"inbound-rule-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 inbound-rule-label\"},\"Source\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 inbound-rule-label\"},\"IP Address\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 inbound-rule-label\"},\"Description\")),inboundRules.map(function(rule){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 rule-select\"},/*#__PURE__*/React.createElement(\"select\",{value:rule.source,className:\"form-control\",onChange:function onChange(e){return _this2.handleSelectChange(e,'source',rule.id);}},sources.map(function(source){return/*#__PURE__*/React.createElement(\"option\",{value:source},source);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"description\",value:rule.ip||'',disabled:rule.source==='My IP',onChange:function onChange(e){return _this2.handleInputChange(e,'ip',rule.id);}}),!_this2.isIPAddressValid(rule.ip)?/*#__PURE__*/React.createElement(\"div\",{className:\"player-invalid-email\"},\"Invalid IP Address\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(AppTextbox,{controlId:\"description\",value:rule.description,onChange:function onChange(e){return _this2.handleInputChange(e,'description',rule.id);}}),!_this2.isDescriptionValid(rule.description)?/*#__PURE__*/React.createElement(\"div\",{className:\"player-invalid-email\"},\"Enter a description\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"col-1\"},/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(e){return _this2.deleteRule(rule.id);}},\"Delete\")));}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return _this2.addRule(e);}},\"Add Rule\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3 button-panel\"},/*#__PURE__*/React.createElement(Button,{variant:\"warning\",onClick:function onClick(e){return _this2.handleCancel(e);}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",disabled:isDisabled,onClick:function onClick(e){return _this2.handleSubmit(e);}},\"Save Rules\"))))));}},{key:\"render\",value:function render(){var renderObj;if(checkRenderPermissions(permissions.CAN_EDIT_MFA_BYPASS_RULES,JSON.parse(localStorage.getItem('userpolicies')))){renderObj=this.renderMFAPolicy();}else{renderObj=/*#__PURE__*/React.createElement(\"h1\",{class:\"unauthorized-header\"},\"You do not have permission to view this page! Please contact your System Administrator!\");}return renderObj;}}]);return MFAPolicy;}(React.Component),_temp))||_class)||_class);export default MFAPolicy;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/ReactExampleCode/test-typescript-compile-within-a-javascript-project/Code/src/Admin/MFAPolicy/MFAPolicy.js"],"names":["React","Button","Modal","AppTextbox","inject","observer","AppToast","checkRenderPermissions","permissions","MFAPolicy","props","handleToastClose","settingsStore","setToast","history","goBack","deleteRule","id","deleteMFABypassRule","setState","isFieldsEdited","callbackToParent","addRule","addMFABypassRule","state","flag","onUpdate","handleInputChange","e","stateName","preventDefault","inboundRules","inboundRule","find","rule","ip","target","value","description","setMFABypassRules","handleSelectChange","source","getMyIPAddress","onYes","saveMFABypassRules","handleSubmit","setShowConfirmSaveModal","onSubmitCancel","onRejectCancel","showCancelPopup","handlePopup","onCancel","discardMFABypassRuleChanges","handleCancel","isIPAddressValid","IPAddress","blocks","split","length","i","Number","isDescriptionValid","trim","sources","getMFABypassRules","showBackConfirm","showConfirmSaveModal","showToast","successMessage","errorMessage","isDisabled","map","renderObj","CAN_EDIT_MFA_BYPASS_RULES","JSON","parse","localStorage","getItem","renderMFAPolicy","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {Button, Modal} from \"react-bootstrap\";\r\nimport \"./MFAPolicy.css\";\r\nimport AppTextbox from \"../../AppTextbox\";\r\nimport {inject, observer} from \"mobx-react\";\r\nimport AppToast from \"../../toast\";\r\nimport {checkRenderPermissions} from \"../../helpers\";\r\nimport {permissions} from \"../../constants\";\r\n\r\n@inject('settingsStore')\r\n@observer\r\nclass MFAPolicy extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            sources: ['Custom', 'My IP'],\r\n            isFieldsEdited: false,\r\n            showCancelPopup: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.settingsStore.getMFABypassRules();\r\n    }\r\n\r\n    handleToastClose = () => {\r\n        this.props.settingsStore.setToast(false);\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    deleteRule = (id) => {\r\n        this.props.settingsStore.deleteMFABypassRule(id);\r\n        this.setState({isFieldsEdited: true}, () => this.callbackToParent());\r\n    }\r\n\r\n    addRule = () => {\r\n        this.props.settingsStore.addMFABypassRule('Test1', 'Descr1')\r\n        this.setState({isFieldsEdited: true}, () => this.callbackToParent());\r\n    }\r\n\r\n    callbackToParent = () => {\r\n        const {isFieldsEdited} = this.state;\r\n        const flag = isFieldsEdited;\r\n        this.props.onUpdate(flag);\r\n    }\r\n\r\n    handleInputChange = (e, stateName, id) => {\r\n\r\n        e.preventDefault();\r\n\r\n        let {inboundRules} = this.props.settingsStore;\r\n\r\n        let inboundRule = inboundRules.find(rule => rule.id === id);\r\n\r\n        if (stateName === 'ip') {\r\n            if (inboundRule) {\r\n                inboundRule.ip = e.target.value;\r\n            }\r\n        } else if (stateName === 'description') {\r\n            if (inboundRule) {\r\n                inboundRule.description = e.target.value;\r\n            }\r\n        }\r\n\r\n        this.props.settingsStore.setMFABypassRules(inboundRules);\r\n        this.setState({isFieldsEdited: true}, () => this.callbackToParent());\r\n    }\r\n\r\n    handleSelectChange = (e, stateName, id) => {\r\n\r\n        e.preventDefault();\r\n\r\n        let {inboundRules} = this.props.settingsStore;\r\n\r\n        let inboundRule = inboundRules.find(rule => rule.id === id);\r\n\r\n        if (stateName === 'source') {\r\n            if (inboundRule) {\r\n                inboundRule.source = e.target.value;\r\n                if (e.target.value === 'My IP') {\r\n                    inboundRule.ip = this.props.settingsStore.getMyIPAddress();\r\n                }\r\n            }\r\n        }\r\n\r\n        this.props.settingsStore.setMFABypassRules(inboundRules);\r\n        this.setState({isFieldsEdited: true}, () => this.callbackToParent());\r\n    }\r\n\r\n    /**\r\n     * Saves all the Bypass Rules\r\n     */\r\n    onYes = () => {\r\n        this.props.settingsStore.saveMFABypassRules();\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        this.props.settingsStore.setShowConfirmSaveModal(true);\r\n    }\r\n\r\n    onSubmitCancel = () => {\r\n        this.props.settingsStore.setShowConfirmSaveModal(false)\r\n    }\r\n\r\n    onRejectCancel = () => {\r\n        this.setState({showCancelPopup: false}, () => this.props.handlePopup(false));\r\n    }\r\n\r\n    onCancel = (e) => {\r\n        e.preventDefault();\r\n        this.props.settingsStore.discardMFABypassRuleChanges();\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    handleCancel = () => {\r\n        if (this.state.isFieldsEdited)\r\n            this.setState({showCancelPopup: true});\r\n        else\r\n            this.props.history.goBack();\r\n    }\r\n\r\n    isIPAddressValid = (IPAddress) => {\r\n        let blocks = IPAddress.split(\".\");\r\n        if (blocks.length === 4 && blocks[3] !== '') {\r\n            for (let i = 0; i < blocks.length; i++) {\r\n                if (Number(blocks[i]) < 0 || Number(blocks[i]) > 255) {\r\n                    return false;\r\n                }\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isDescriptionValid = (description) => {\r\n        return description && description.trim().length > 0;\r\n    }\r\n\r\n    renderMFAPolicy() {\r\n\r\n        const {sources, showCancelPopup} = this.state;\r\n        const {showBackConfirm} = this.props;\r\n        const {inboundRules, showConfirmSaveModal, showToast, successMessage, errorMessage} = this.props.settingsStore;\r\n\r\n        // Disable [Save Rules] if needed\r\n        let isDisabled = true;\r\n        let rule;\r\n        for (rule of inboundRules) {\r\n            isDisabled = !this.isIPAddressValid(rule.ip) || !this.isDescriptionValid(rule.description)\r\n        }\r\n\r\n        return (\r\n\r\n            <div className='player-details-container container-fluid '>\r\n                {showToast\r\n                    ?\r\n                    <AppToast showToast={showToast}\r\n                              message={successMessage ? successMessage : errorMessage}\r\n                              isSuccessMessage={successMessage !== null}\r\n                              handleClose={() => this.handleToastClose()}/>\r\n                    : null\r\n                }\r\n                <Modal show={showCancelPopup || showBackConfirm} centered={true}>\r\n                    <Modal.Body>\r\n                        <div className='player-details-label'>\r\n                            Are you sure you would like to cancel? All unsaved changes will be lost.\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant='secondary' onClick={(e) => this.onRejectCancel(e)}>No</Button>\r\n                        <Button variant='primary' onClick={(e) => this.onCancel(e)}>Yes</Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n                <Modal show={showConfirmSaveModal} centered={true}>\r\n                    <Modal.Body>\r\n                        <div className='player-details-label'>\r\n                            Are you sure you would like to Save?\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant='secondary' onClick={(e) => this.onSubmitCancel(e)}>No</Button>\r\n                        <Button variant='primary' onClick={() => this.onYes()}>Yes</Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n\r\n                <div className='player-details-panel'>\r\n                    <div className='inbound-rule-container'>\r\n                        <div className='row'>\r\n                            <div className='col-3 inbound-rule-label'>Source</div>\r\n                            <div className='col-4 inbound-rule-label'>IP Address</div>\r\n                            <div className='col-4 inbound-rule-label'>Description</div>\r\n                        </div>\r\n                        {\r\n                            inboundRules.map(rule => {\r\n                                return <div className='row'>\r\n                                    <div className='col-3 rule-select'>\r\n                                        <select value={rule.source} className='form-control'\r\n                                                onChange={(e) => this.handleSelectChange(e, 'source', rule.id)}>\r\n                                            {\r\n                                                sources.map(source => {\r\n                                                    return <option value={source}>{source}</option>\r\n                                                })\r\n                                            }\r\n                                        </select>\r\n                                    </div>\r\n                                    <div className='col-4'>\r\n                                        <AppTextbox controlId='description' value={rule.ip || ''}\r\n                                                    disabled={(rule.source === 'My IP')}\r\n                                                    onChange={(e) => this.handleInputChange(e, 'ip', rule.id)}/>\r\n                                        {\r\n                                            !this.isIPAddressValid(rule.ip)\r\n                                                ? <div className='player-invalid-email'>Invalid IP Address</div>\r\n                                                : null\r\n                                        }\r\n                                    </div>\r\n                                    <div className='col-4'>\r\n                                        <AppTextbox controlId='description' value={rule.description}\r\n                                                    onChange={(e) => this.handleInputChange(e, 'description', rule.id)}/>\r\n                                        {\r\n                                            !this.isDescriptionValid(rule.description)\r\n                                                ? <div className='player-invalid-email'>Enter a description</div>\r\n                                                : null\r\n                                        }\r\n                                    </div>\r\n                                    <div className='col-1'>\r\n                                        <Button variant='danger' onClick={(e) => this.deleteRule(rule.id)}>\r\n                                            Delete\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            })\r\n                        }\r\n                        <div className='row'>\r\n                            <div className='col-3'>\r\n                                <Button variant='primary' onClick={(e) => this.addRule(e)}>\r\n                                    Add Rule\r\n                                </Button>\r\n                            </div>\r\n                            <div className='col-3 button-panel'>\r\n                                <Button variant='warning' onClick={(e) => this.handleCancel(e)}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button variant='primary' disabled={isDisabled} onClick={(e) => this.handleSubmit(e)}>\r\n                                    Save Rules\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n    render() {\r\n        var renderObj;\r\n\r\n        if (checkRenderPermissions(permissions.CAN_EDIT_MFA_BYPASS_RULES, JSON.parse(localStorage.getItem('userpolicies')))) {\r\n            renderObj = this.renderMFAPolicy();\r\n        } else {\r\n            renderObj =\r\n                <h1 class='unauthorized-header'>You do not have permission to view this page! Please contact your System\r\n                    Administrator!</h1>\r\n        }\r\n\r\n        return (\r\n            renderObj\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default MFAPolicy;\r\n"]},"metadata":{},"sourceType":"module"}