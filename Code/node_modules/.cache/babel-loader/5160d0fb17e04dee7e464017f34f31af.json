{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tomsa\\\\OneDrive\\\\Desktop\\\\Capstone\\\\lottery\\\\mslc-backoffice-client\\\\v1\\\\Code\\\\src\\\\systemdetails\\\\SystemDetails.js\";\nimport React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { Line } from 'react-chartjs-2';\nimport SystemSearch from '../systemsearch';\nimport ReactTable from \"../PaginatedTable/ReactTable\";\nimport AppToast from \"../toast\";\nimport config from \"../config\";\nimport moment from \"moment\";\nimport { ExportToCsv } from 'export-to-csv';\nimport './SystemDetails.css';\n\nclass SystemDetails extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setSystemDetails = res => {\n      var data = res.hits.hits;\n      this.setState({\n        'category': data[0]._source.category,\n        'datetime': data[0]._source.eventDateTime,\n        'sourceFile': data[0]._source.fileName,\n        'description': data[0]._source.eventDescription,\n        'logLine': data[0]._source.eventResult,\n        'logContext': data[0]._source.context\n      });\n    };\n\n    this.state = {\n      category: '',\n      datetime: '',\n      sourceFile: '',\n      description: '',\n      logLine: '',\n      logContext: '',\n      showError: false,\n      showToast: false\n    };\n  }\n\n  fetchSystemDetails(id = '') {\n    if (id == '') {\n      console.log('no query string passed');\n    } else {\n      var queryStr = `?id=${id}`;\n      let url = `${config.LOG_SERVER_BASE_URL}/v1/log/eventbyid${queryStr}`;\n      fetch(url, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(res => {\n        if (res.error) {\n          console.log(res.error);\n        } else {\n          this.setSystemDetails(res);\n        }\n      }).catch(error => {\n        this.setState({\n          showError: true,\n          errorMessage: error.toString()\n        });\n      });\n    }\n  }\n\n  componentDidMount() {\n    var data = null;\n\n    if (this.props.location.state == undefined) {\n      this.props.history.push('/system/dashboard');\n    } else {\n      var id = this.props.location.state.detail;\n      this.fetchSystemDetails(id);\n    }\n  }\n\n  downloadClicked(data) {\n    this.csvExporter.generateCsv(data);\n  }\n\n  render() {\n    const {\n      category,\n      datetime,\n      sourceFile,\n      description,\n      logLine,\n      logContext\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-rows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"system-details-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, \"Category:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"system-details-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, category)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-rows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"system-details-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, \"Local Time:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"system-details-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, datetime)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-rows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"system-details-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }, \"Source File:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"system-details-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, sourceFile)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-rows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"system-details-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, \"Description:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"system-details-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, description)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-rows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"system-details-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, \"Log Line:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"system-details-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, logLine)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system-details-rows\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"system-details-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, \"Log Context:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"system-details-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, logContext)));\n  }\n\n}\n\nexport default SystemDetails;","map":{"version":3,"sources":["C:/Users/tomsa/OneDrive/Desktop/Capstone/lottery/mslc-backoffice-client/v1/Code/src/systemdetails/SystemDetails.js"],"names":["React","Button","Line","SystemSearch","ReactTable","AppToast","config","moment","ExportToCsv","SystemDetails","Component","constructor","props","setSystemDetails","res","data","hits","setState","_source","category","eventDateTime","fileName","eventDescription","eventResult","context","state","datetime","sourceFile","description","logLine","logContext","showError","showToast","fetchSystemDetails","id","console","log","queryStr","url","LOG_SERVER_BASE_URL","fetch","method","headers","localStorage","getItem","then","response","json","error","catch","errorMessage","toString","componentDidMount","location","undefined","history","push","detail","downloadClicked","csvExporter","generateCsv","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport {Line} from 'react-chartjs-2';\r\nimport SystemSearch from '../systemsearch';\r\nimport ReactTable from \"../PaginatedTable/ReactTable\";\r\nimport AppToast from \"../toast\";\r\nimport config from \"../config\";\r\nimport moment from \"moment\";\r\nimport {ExportToCsv} from 'export-to-csv';\r\n\r\nimport './SystemDetails.css';\r\n\r\nclass SystemDetails extends React.Component {  \r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            category: '',\r\n            datetime: '',\r\n            sourceFile: '',\r\n            description: '',\r\n            logLine: '',\r\n            logContext: '',\r\n            showError: false,\r\n            showToast: false\r\n        };\r\n    }\r\n\r\n    fetchSystemDetails(id = ''){\r\n        if(id == ''){\r\n            console.log('no query string passed');\r\n        } else {\r\n            var queryStr = `?id=${id}`;\r\n\r\n            let url = `${config.LOG_SERVER_BASE_URL}/v1/log/eventbyid${queryStr}`;\r\n            fetch(url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\r\n                    'Content-Type': 'application/json',\r\n                }\r\n                })\r\n                .then(response => response.json())\r\n                .then(res => {\r\n                    if (res.error) {\r\n                        console.log(res.error);\r\n                    } else {\r\n                        this.setSystemDetails(res);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({showError: true, errorMessage: error.toString()})\r\n                });\r\n        }\r\n    }\r\n\r\n    setSystemDetails = (res) => {\r\n        var data = res.hits.hits;\r\n\r\n        this.setState({\r\n            'category': data[0]._source.category,\r\n            'datetime': data[0]._source.eventDateTime,\r\n            'sourceFile': data[0]._source.fileName,\r\n            'description': data[0]._source.eventDescription,\r\n            'logLine': data[0]._source.eventResult,\r\n            'logContext': data[0]._source.context,\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        var data = null;\r\n\r\n        if (this.props.location.state == undefined){\r\n            this.props.history.push('/system/dashboard');\r\n        }\r\n        else\r\n        {\r\n            var id = this.props.location.state.detail;\r\n            this.fetchSystemDetails(id);\r\n        }\r\n    }\r\n\r\n    downloadClicked(data) {\r\n        this.csvExporter.generateCsv(data);\r\n    }\r\n\r\n    render() {\r\n        const {category, datetime, sourceFile, description, logLine, logContext} = this.state;        \r\n\r\n        return(\r\n            <div className='system-details-panel'>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Category:</h4>\r\n                    <p className='system-details-text'>{category}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Local Time:</h4>\r\n                    <p className='system-details-text'>{datetime}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Source File:</h4>\r\n                    <p className='system-details-text'>{sourceFile}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Description:</h4>\r\n                    <p className='system-details-text'>{description}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Log Line:</h4>\r\n                    <p className='system-details-text'>{logLine}</p>\r\n                </div>\r\n                <div className='system-details-rows'>\r\n                    <h4 className='system-details-header'>Log Context:</h4>\r\n                    <p className='system-details-text'>{logContext}</p>\r\n                </div>\r\n            </div>\r\n        ) \r\n    }\r\n}\r\n\r\nexport default SystemDetails;"]},"metadata":{},"sourceType":"module"}